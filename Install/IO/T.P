ptab.cpp 1: 
ptab.cpp 2: 
ptab.cpp 3: 
ptab.cpp 4: 
ptab.cpp 5: 
ptab.cpp 6: 
ptab.cpp 7: 
ptab.cpp 8: 
ptab.cpp 9: 
ptab.cpp 10: 
ptab.cpp 11: 
..\include\ptab.h 1: 
..\include\ptab.h 2: 
..\include\ptab.h 3: 
..\include\ptab.h 4: 
..\include\ptab.h 5: 
..\include\ptab.h 6: 
..\include\ptab.h 7: 
..\include\ptab.h 8: 
..\include\ptab.h 9: 
..\include\ptab.h 10: 
..\include\ptab.h 11: 
..\include\ptab.h 12: 
..\include\ptab.h 13: 
..\include\ptab.h 14: 
..\include\defs.h 1: 
..\include\defs.h 2: 
..\include\defs.h 3: 
..\include\defs.h 4: 
..\include\defs.h 5: 
..\include\defs.h 6: 
..\include\defs.h 7: 
..\include\defs.h 8: 
..\include\defs.h 9: 
..\include\defs.h 10: 
..\include\defs.h 11: 
..\include\defs.h 12: 
..\include\defs.h 13: 
..\include\defs.h 14: 
..\include\defs.h 15: 
..\include\defs.h 16: 
..\include\defs.h 17: 
..\include\defs.h 18: 
..\include\defs.h 19: 
..\include\defs.h 20: 
..\include\defs.h 21: 
..\include\defs.h 22: 
..\include\defs.h 23: 
..\include\defs.h 24: 
..\include\defs.h 25: 
..\include\defs.h 26: 
..\include\defs.h 27: 
..\include\defs.h 28: 
..\include\defs.h 29: 
..\include\defs.h 30: 
..\include\defs.h 31: 
..\include\defs.h 32: 
..\include\defs.h 33: 
..\include\defs.h 34: 
..\include\defs.h 35: 
..\include\defs.h 36: 
..\include\defs.h 37: 
..\include\defs.h 38: 
..\include\defs.h 39: 
..\include\defs.h 40: 
..\include\defs.h 41: 
..\include\defs.h 42: 
..\include\defs.h 43: 
..\include\defs.h 44: 
..\include\defs.h 45: 
..\include\defs.h 46: 
..\include\defs.h 47: 
..\include\defs.h 48: 
..\include\defs.h 49: 
..\include\defs.h 50: 
..\include\defs.h 51: 
..\include\defs.h 52: 
..\include\defs.h 53: 
..\include\defs.h 54: 
..\include\defs.h 55: 
..\include\defs.h 56: typedef int bool;
..\include\defs.h 57: 
..\include\defs.h 58: 
..\include\defs.h 59: 
..\include\defs.h 60: 
..\include\defs.h 61: 
..\include\defs.h 62: 
..\include\ptab.h 15: 
..\include\ptab.h 16: 
..\include\ptab.h 17: 
..\include\ptab.h 18: 
..\include\ptab.h 19: 
..\include\ptab.h 20: 
..\include\ptab.h 21: typedef struct {
..\include\ptab.h 22: unsigned char Activated;
..\include\ptab.h 23: unsigned char StartHead;
..\include\ptab.h 24: unsigned short StartSectCyl;
..\include\ptab.h 25: unsigned char FSType;
..\include\ptab.h 26: unsigned char EndHead;
..\include\ptab.h 27: unsigned short EndSectCyl;
..\include\ptab.h 28: unsigned long RelativeSector;
..\include\ptab.h 29: unsigned long SectorCount;
..\include\ptab.h 30: } TPartEntry;
..\include\ptab.h 31: 
..\include\ptab.h 32: typedef struct {
..\include\ptab.h 33: char IPL[446];
..\include\ptab.h 34: TPartEntry Entries[4];
..\include\ptab.h 35: unsigned short MagicNumber; 
..\include\ptab.h 36: } TPartTable;
..\include\ptab.h 37: 
..\include\ptab.h 38: typedef struct S_MBRNode {
..\include\ptab.h 39: unsigned long AbsoluteSector;
..\include\ptab.h 40: short Drive;
..\include\ptab.h 41: short Type; 
..\include\ptab.h 42: TPartTable *Table;
..\include\ptab.h 43: struct S_MBRNode *Next;
..\include\ptab.h 44: } TMBRNode;
..\include\ptab.h 45: 
..\include\ptab.h 46: typedef struct {
..\include\ptab.h 47: short Drive;
..\include\ptab.h 48: unsigned long StartSector;
..\include\ptab.h 49: unsigned long SectorCount;
..\include\ptab.h 50: const char *FSName;
..\include\ptab.h 51: short FSType;
..\include\ptab.h 52: short Type; 
..\include\ptab.h 53: unsigned char MbrHDSector0;
..\include\ptab.h 54: } TPartition;
..\include\ptab.h 55: 
..\include\ptab.h 56: typedef struct S_PartNode {
..\include\ptab.h 57: TPartEntry *Entry;
..\include\ptab.h 58: TPartition *Partition;
..\include\ptab.h 59: struct S_PartNode *Next;
..\include\ptab.h 60: } TPartNode;
..\include\ptab.h 61: 
..\include\ptab.h 62: class CPartList {
..\include\ptab.h 63: public:
..\include\ptab.h 64: CPartList();
..\include\ptab.h 65: ~CPartList();
..\include\ptab.h 66: void ReadStructure();
..\include\ptab.h 67: void WriteStructure();
..\include\ptab.h 68: const TPartition *GetPartition(int Index);
..\include\ptab.h 69: int Locate(int Drive, unsigned long StartSector);
..\include\ptab.h 70: int GetCount();
..\include\ptab.h 71: int CanHide(int Index);
..\include\ptab.h 72: void Hide(int Index);
..\include\ptab.h 73: void Reveal(int Index);
..\include\ptab.h 74: int CanActivate(int Index);
..\include\ptab.h 75: void SetAllowActiveHD(int Status);
..\include\ptab.h 76: void SetActive(int Index);
..\include\ptab.h 77: void SetFsType(int Index, int FsType);
..\include\ptab.h 78: public:
..\include\ptab.h 79: typedef struct {
..\include\ptab.h 80: int FSID;
..\include\ptab.h 81: const char *FSName;
..\include\ptab.h 82: } TFSNameEntry;
..\include\ptab.h 83: private:
..\include\ptab.h 84: void ClearActive(int Drive);
..\include\ptab.h 85: 
..\include\ptab.h 86: TMBRNode *AddDrive(int Drive, unsigned long StartSector, unsigned long ExtStart, int Type, TMBRNode *MBRList);
..\include\ptab.h 87: void CreatePartList(int FloppyCount);
..\include\ptab.h 88: TPartNode *CreatePartNode(const TMBRNode *MBRNode, int Index);
..\include\ptab.h 89: TPartNode *CreateNonPartNode(int Drive);
..\include\ptab.h 90: const char *GetFSName(int FSID);
..\include\ptab.h 91: void CreatePLUP();
..\include\ptab.h 92: unsigned char GetPartMbrHDSector0(TPartition *Partition);
..\include\ptab.h 93: 
..\include\ptab.h 94: TMBRNode MBRList;
..\include\ptab.h 95: TPartNode PartList;
..\include\ptab.h 96: int Count;
..\include\ptab.h 97: TPartNode **PLUP;
..\include\ptab.h 98: static TFSNameEntry FSNameList[];
..\include\ptab.h 99: int AllowActiveHD;
..\include\ptab.h 100: };
..\include\ptab.h 101: 
..\include\ptab.h 102: 
..\include\ptab.h 103: 
..\include\ptab.h 104: 
..\include\ptab.h 105: 
ptab.cpp 12: 
..\include\transfer.h 1: 
..\include\transfer.h 2: 
..\include\transfer.h 3: 
..\include\transfer.h 4: 
..\include\transfer.h 5: 
..\include\transfer.h 6: 
..\include\transfer.h 7: 
..\include\transfer.h 8: 
..\include\transfer.h 9: 
..\include\transfer.h 10: 
..\include\transfer.h 11: 
..\include\transfer.h 12: 
..\include\transfer.h 13: 
..\include\transfer.h 14: 
..\include\transfer.h 15: 
..\include\transfer.h 16: 
..\include\transfer.h 17: 
..\include\transfer.h 18: 
..\include\transfer.h 19: 
..\include\transfer.h 20: 
..\include\transfer.h 21: 
..\include\transfer.h 22: 
..\include\transfer.h 23: 
..\include\transfer.h 24: typedef struct {
..\include\transfer.h 25: int PacketSize;
..\include\transfer.h 26: int SectorCount;
..\include\transfer.h 27: void *TransferBuffer;
..\include\transfer.h 28: unsigned long SectorLow;
..\include\transfer.h 29: unsigned long SectorHigh;
..\include\transfer.h 30: } TLBAPacket;
..\include\transfer.h 31: 
..\include\transfer.h 32: class CDiskAccess {
..\include\transfer.h 33: public:
..\include\transfer.h 34: CDiskAccess();
..\include\transfer.h 35: ~CDiskAccess();
..\include\transfer.h 36: 
..\include\transfer.h 37: 
..\include\transfer.h 38: int DriveCount(int Fixed);
..\include\transfer.h 39: int Transfer(int Action, unsigned short SectCyl,
..\include\transfer.h 40: unsigned short DrvHead, void *Buffer, int Count);
..\include\transfer.h 41: int GetDriveInfo(int Drive, int &Heads, int &Sectors);
..\include\transfer.h 42: int CopyFromScratchpad(void *Buffer, int Sectors);
..\include\transfer.h 43: int CopyToScratchpad(const void *Buffer, int Sectors);
..\include\transfer.h 44: 
..\include\transfer.h 45: 
..\include\transfer.h 46: int LBAAccessAvail(int Drive);
..\include\transfer.h 47: int LBATransfer(int Action, int Drive, const TLBAPacket &LBAPacket);
..\include\transfer.h 48: void SetLockStatus(int Drive, int Status);
..\include\transfer.h 49: };
..\include\transfer.h 50: 
..\include\transfer.h 51: 
..\include\transfer.h 52: 
..\include\transfer.h 53: 
ptab.cpp 13: 
..\include\disk.h 1: 
..\include\disk.h 2: 
..\include\disk.h 3: 
..\include\disk.h 4: 
..\include\disk.h 5: 
..\include\disk.h 6: 
..\include\disk.h 7: 
..\include\disk.h 8: 
..\include\disk.h 9: 
..\include\disk.h 10: 
..\include\disk.h 11: 
..\include\disk.h 12: 
..\include\disk.h 13: 
..\include\disk.h 14: 
..\include\disk.h 15: 
..\include\disk.h 16: 
..\include\disk.h 17: 
..\include\disk.h 18: 
..\include\disk.h 19: 
..\include\disk.h 20: 
..\include\defs.h 1: 
..\include\defs.h 2: 
..\include\defs.h 3: 
..\include\defs.h 4: 
..\include\defs.h 5: 
..\include\defs.h 6: 
..\include\defs.h 7: 
..\include\defs.h 8: 
..\include\defs.h 9: 
..\include\defs.h 10: 
..\include\defs.h 11: 
..\include\defs.h 12: 
..\include\defs.h 13: 
..\include\defs.h 14: 
..\include\defs.h 15: 
..\include\defs.h 16: 
..\include\defs.h 17: 
..\include\defs.h 18: 
..\include\defs.h 19: 
..\include\defs.h 20: 
..\include\defs.h 21: 
..\include\defs.h 22: 
..\include\defs.h 23: 
..\include\defs.h 24: 
..\include\defs.h 25: 
..\include\defs.h 26: 
..\include\defs.h 27: 
..\include\defs.h 28: 
..\include\defs.h 29: 
..\include\defs.h 30: 
..\include\defs.h 31: 
..\include\defs.h 32: 
..\include\defs.h 33: 
..\include\defs.h 34: 
..\include\defs.h 35: 
..\include\defs.h 36: 
..\include\defs.h 37: 
..\include\defs.h 38: 
..\include\defs.h 39: 
..\include\defs.h 40: 
..\include\defs.h 41: 
..\include\defs.h 42: 
..\include\defs.h 43: 
..\include\defs.h 44: 
..\include\defs.h 45: 
..\include\defs.h 46: 
..\include\defs.h 47: 
..\include\defs.h 48: 
..\include\defs.h 49: 
..\include\defs.h 50: 
..\include\defs.h 51: 
..\include\defs.h 52: 
..\include\defs.h 53: 
..\include\defs.h 54: 
..\include\defs.h 55: 
..\include\defs.h 56: 
..\include\defs.h 57: 
..\include\defs.h 58: 
..\include\defs.h 59: 
..\include\defs.h 60: 
..\include\defs.h 61: 
..\include\defs.h 62: 
..\include\disk.h 21: 
..\include\transfer.h 1: 
..\include\transfer.h 2: 
..\include\transfer.h 3: 
..\include\transfer.h 4: 
..\include\transfer.h 5: 
..\include\transfer.h 6: 
..\include\transfer.h 7: 
..\include\transfer.h 8: 
..\include\transfer.h 9: 
..\include\transfer.h 10: 
..\include\transfer.h 11: 
..\include\transfer.h 12: 
..\include\transfer.h 13: 
..\include\transfer.h 14: 
..\include\transfer.h 15: 
..\include\transfer.h 16: 
..\include\transfer.h 17: 
..\include\transfer.h 18: 
..\include\transfer.h 19: 
..\include\transfer.h 20: 
..\include\transfer.h 21: 
..\include\transfer.h 22: 
..\include\transfer.h 23: 
..\include\transfer.h 24: 
..\include\transfer.h 25: 
..\include\transfer.h 26: 
..\include\transfer.h 27: 
..\include\transfer.h 28: 
..\include\transfer.h 29: 
..\include\transfer.h 30: 
..\include\transfer.h 31: 
..\include\transfer.h 32: 
..\include\transfer.h 33: 
..\include\transfer.h 34: 
..\include\transfer.h 35: 
..\include\transfer.h 36: 
..\include\transfer.h 37: 
..\include\transfer.h 38: 
..\include\transfer.h 39: 
..\include\transfer.h 40: 
..\include\transfer.h 41: 
..\include\transfer.h 42: 
..\include\transfer.h 43: 
..\include\transfer.h 44: 
..\include\transfer.h 45: 
..\include\transfer.h 46: 
..\include\transfer.h 47: 
..\include\transfer.h 48: 
..\include\transfer.h 49: 
..\include\transfer.h 50: 
..\include\transfer.h 51: 
..\include\transfer.h 52: 
..\include\transfer.h 53: 
..\include\disk.h 22: 
..\include\disk.h 23: class CDisk {
..\include\disk.h 24: public:
..\include\disk.h 25: CDisk();
..\include\disk.h 26: ~CDisk();
..\include\disk.h 27: 
..\include\disk.h 28: int DriveCount(int Fixed);
..\include\disk.h 29: 
..\include\disk.h 30: int Map(int Drive, unsigned long StartSector);
..\include\disk.h 31: 
..\include\disk.h 32: int Read(unsigned long Sector, void *Buffer, int Count);
..\include\disk.h 33: int Write(unsigned long Sector, const void *Buffer, int Count);
..\include\disk.h 34: int Verify(unsigned long Sector, int Count);
..\include\disk.h 35: 
..\include\disk.h 36: void Lock();
..\include\disk.h 37: void Unlock();
..\include\disk.h 38: 
..\include\disk.h 39: private:
..\include\disk.h 40: int Transfer(int Action, unsigned long Sector, void *Buffer, int Count);
..\include\disk.h 41: void Sector2CHS(unsigned long RSector, unsigned short &SectCyl, unsigned short &DrvHead);
..\include\disk.h 42: 
..\include\disk.h 43: CDiskAccess DiskAccess;
..\include\disk.h 44: 
..\include\disk.h 45: int DrvHeadCount;
..\include\disk.h 46: int DrvSectorCount;
..\include\disk.h 47: int Drive;
..\include\disk.h 48: unsigned long StartSector;
..\include\disk.h 49: int UseLBA;
..\include\disk.h 50: int DiskMapped;
..\include\disk.h 51: };
..\include\disk.h 52: 
..\include\disk.h 53: 
..\include\disk.h 54: 
ptab.cpp 14: 
ptab.cpp 15: 
..\include\fat16.h 1: 
..\include\fat16.h 2: 
..\include\fat16.h 3: 
..\include\fat16.h 4: 
..\include\fat16.h 5: 
..\include\fat16.h 6: 
..\include\fat16.h 7: 
..\include\fat16.h 8: 
..\include\fat16.h 9: 
..\include\fat16.h 10: 
..\include\fat16.h 11: 
..\include\fat16.h 12: 
..\include\fat16.h 13: 
..\include\fat16.h 14: 
..\include\fs.h 1: 
..\include\fs.h 2: 
..\include\fs.h 3: 
..\include\fs.h 4: 
..\include\fs.h 5: 
..\include\fs.h 6: 
..\include\fs.h 7: 
..\include\fs.h 8: 
..\include\fs.h 9: 
..\include\fs.h 10: 
..\include\fs.h 11: 
..\include\fs.h 12: 
..\include\fs.h 13: 
..\include\fs.h 14: 
..\include\ptab.h 1: 
..\include\ptab.h 2: 
..\include\ptab.h 3: 
..\include\ptab.h 4: 
..\include\ptab.h 5: 
..\include\ptab.h 6: 
..\include\ptab.h 7: 
..\include\ptab.h 8: 
..\include\ptab.h 9: 
..\include\ptab.h 10: 
..\include\ptab.h 11: 
..\include\ptab.h 12: 
..\include\ptab.h 13: 
..\include\ptab.h 14: 
..\include\ptab.h 15: 
..\include\ptab.h 16: 
..\include\ptab.h 17: 
..\include\ptab.h 18: 
..\include\ptab.h 19: 
..\include\ptab.h 20: 
..\include\ptab.h 21: 
..\include\ptab.h 22: 
..\include\ptab.h 23: 
..\include\ptab.h 24: 
..\include\ptab.h 25: 
..\include\ptab.h 26: 
..\include\ptab.h 27: 
..\include\ptab.h 28: 
..\include\ptab.h 29: 
..\include\ptab.h 30: 
..\include\ptab.h 31: 
..\include\ptab.h 32: 
..\include\ptab.h 33: 
..\include\ptab.h 34: 
..\include\ptab.h 35: 
..\include\ptab.h 36: 
..\include\ptab.h 37: 
..\include\ptab.h 38: 
..\include\ptab.h 39: 
..\include\ptab.h 40: 
..\include\ptab.h 41: 
..\include\ptab.h 42: 
..\include\ptab.h 43: 
..\include\ptab.h 44: 
..\include\ptab.h 45: 
..\include\ptab.h 46: 
..\include\ptab.h 47: 
..\include\ptab.h 48: 
..\include\ptab.h 49: 
..\include\ptab.h 50: 
..\include\ptab.h 51: 
..\include\ptab.h 52: 
..\include\ptab.h 53: 
..\include\ptab.h 54: 
..\include\ptab.h 55: 
..\include\ptab.h 56: 
..\include\ptab.h 57: 
..\include\ptab.h 58: 
..\include\ptab.h 59: 
..\include\ptab.h 60: 
..\include\ptab.h 61: 
..\include\ptab.h 62: 
..\include\ptab.h 63: 
..\include\ptab.h 64: 
..\include\ptab.h 65: 
..\include\ptab.h 66: 
..\include\ptab.h 67: 
..\include\ptab.h 68: 
..\include\ptab.h 69: 
..\include\ptab.h 70: 
..\include\ptab.h 71: 
..\include\ptab.h 72: 
..\include\ptab.h 73: 
..\include\ptab.h 74: 
..\include\ptab.h 75: 
..\include\ptab.h 76: 
..\include\ptab.h 77: 
..\include\ptab.h 78: 
..\include\ptab.h 79: 
..\include\ptab.h 80: 
..\include\ptab.h 81: 
..\include\ptab.h 82: 
..\include\ptab.h 83: 
..\include\ptab.h 84: 
..\include\ptab.h 85: 
..\include\ptab.h 86: 
..\include\ptab.h 87: 
..\include\ptab.h 88: 
..\include\ptab.h 89: 
..\include\ptab.h 90: 
..\include\ptab.h 91: 
..\include\ptab.h 92: 
..\include\ptab.h 93: 
..\include\ptab.h 94: 
..\include\ptab.h 95: 
..\include\ptab.h 96: 
..\include\ptab.h 97: 
..\include\ptab.h 98: 
..\include\ptab.h 99: 
..\include\ptab.h 100: 
..\include\ptab.h 101: 
..\include\ptab.h 102: 
..\include\ptab.h 103: 
..\include\ptab.h 104: 
..\include\ptab.h 105: 
..\include\fs.h 15: 
..\include\fs.h 16: 
..\include\disk.h 1: 
..\include\disk.h 2: 
..\include\disk.h 3: 
..\include\disk.h 4: 
..\include\disk.h 5: 
..\include\disk.h 6: 
..\include\disk.h 7: 
..\include\disk.h 8: 
..\include\disk.h 9: 
..\include\disk.h 10: 
..\include\disk.h 11: 
..\include\disk.h 12: 
..\include\disk.h 13: 
..\include\disk.h 14: 
..\include\disk.h 15: 
..\include\disk.h 16: 
..\include\disk.h 17: 
..\include\disk.h 18: 
..\include\disk.h 19: 
..\include\disk.h 20: 
..\include\disk.h 21: 
..\include\disk.h 22: 
..\include\disk.h 23: 
..\include\disk.h 24: 
..\include\disk.h 25: 
..\include\disk.h 26: 
..\include\disk.h 27: 
..\include\disk.h 28: 
..\include\disk.h 29: 
..\include\disk.h 30: 
..\include\disk.h 31: 
..\include\disk.h 32: 
..\include\disk.h 33: 
..\include\disk.h 34: 
..\include\disk.h 35: 
..\include\disk.h 36: 
..\include\disk.h 37: 
..\include\disk.h 38: 
..\include\disk.h 39: 
..\include\disk.h 40: 
..\include\disk.h 41: 
..\include\disk.h 42: 
..\include\disk.h 43: 
..\include\disk.h 44: 
..\include\disk.h 45: 
..\include\disk.h 46: 
..\include\disk.h 47: 
..\include\disk.h 48: 
..\include\disk.h 49: 
..\include\disk.h 50: 
..\include\disk.h 51: 
..\include\disk.h 52: 
..\include\disk.h 53: 
..\include\disk.h 54: 
..\include\fs.h 17: 
..\include\fs.h 18: class CFileSystem {
..\include\fs.h 19: public:
..\include\fs.h 20: CFileSystem();
..\include\fs.h 21: virtual ~CFileSystem();
..\include\fs.h 22: virtual int Mount(int Drive, unsigned long StartSector);
..\include\fs.h 23: virtual unsigned short ReadFile(const char *FileName, void *Buffer) = 0;
..\include\fs.h 24: virtual int WriteFile(const char *FileName, const void *Buffer) = 0;
..\include\fs.h 25: protected:
..\include\fs.h 26: CDisk Disk;
..\include\fs.h 27: };
..\include\fs.h 28: 
..\include\fs.h 29: 
..\include\fs.h 30: 
..\include\fs.h 31: 
..\include\fs.h 32: 
..\include\fs.h 33: 
..\include\fat16.h 15: 
..\..\include\bootrec.h 1: 
..\..\include\bootrec.h 2: 
..\..\include\bootrec.h 3: 
..\..\include\bootrec.h 4: 
..\..\include\bootrec.h 5: 
..\..\include\bootrec.h 6: 
..\..\include\bootrec.h 7: 
..\..\include\bootrec.h 8: 
..\..\include\bootrec.h 9: 
..\..\include\bootrec.h 10: 
..\..\include\bootrec.h 11: 
..\..\include\bootrec.h 12: 
..\..\include\bootrec.h 13: 
..\..\include\bootrec.h 14: typedef struct {
..\..\include\bootrec.h 15: 
..\..\include\bootrec.h 16: unsigned char Jump[3];              
..\..\include\bootrec.h 17: unsigned char OEM_ID[8];            
..\..\include\bootrec.h 18: unsigned short SectorSize;          
..\..\include\bootrec.h 19: unsigned char ClusterSize;          
..\..\include\bootrec.h 20: unsigned short ReservedSectors;     
..\..\include\bootrec.h 21: unsigned char FATCopies;            
..\..\include\bootrec.h 22: unsigned short RootEntries;         
..\..\include\bootrec.h 23: unsigned short SectorCount;         
..\..\include\bootrec.h 24: unsigned char MediaDescriptor;      
..\..\include\bootrec.h 25: unsigned short FATSize;             
..\..\include\bootrec.h 26: unsigned short TrackSize;           
..\..\include\bootrec.h 27: unsigned short HeadCount;           
..\..\include\bootrec.h 28: unsigned long HiddenSectors;        
..\..\include\bootrec.h 29: unsigned long BigSectorCount;       
..\..\include\bootrec.h 30: unsigned short Drive;               
..\..\include\bootrec.h 31: unsigned char Signature;            
..\..\include\bootrec.h 32: unsigned long SerialNo;             
..\..\include\bootrec.h 33: unsigned char Label[11];            
..\..\include\bootrec.h 34: unsigned char FSID[8];              
..\..\include\bootrec.h 35: unsigned char Loader[448];          
..\..\include\bootrec.h 36: unsigned short MagicNumber; 
..\..\include\bootrec.h 37: } TBootFAT16;
..\..\include\bootrec.h 38: 
..\..\include\bootrec.h 39: typedef struct {
..\..\include\bootrec.h 40: 
..\..\include\bootrec.h 41: unsigned char Jump[3];              
..\..\include\bootrec.h 42: unsigned char OEM_ID[8];            
..\..\include\bootrec.h 43: unsigned short SectorSize;          
..\..\include\bootrec.h 44: unsigned char ClusterSize;          
..\..\include\bootrec.h 45: unsigned short ReservedSectors;     
..\..\include\bootrec.h 46: unsigned char FATCopies;            
..\..\include\bootrec.h 47: unsigned char Reserved1[4];         
..\..\include\bootrec.h 48: unsigned char MediaDescriptor;      
..\..\include\bootrec.h 49: unsigned short FATSize;			   
..\..\include\bootrec.h 50: 
..\..\include\bootrec.h 51: unsigned short TrackSize;           
..\..\include\bootrec.h 52: unsigned short HeadCount;           
..\..\include\bootrec.h 53: unsigned long HiddenSectors;        
..\..\include\bootrec.h 54: unsigned long BigSectorCount;       
..\..\include\bootrec.h 55: unsigned long BigFATSize;           
..\..\include\bootrec.h 56: 
..\..\include\bootrec.h 57: unsigned short Flags;               
..\..\include\bootrec.h 58: unsigned char FSVerMajor;           
..\..\include\bootrec.h 59: unsigned char FSVerMinor;           
..\..\include\bootrec.h 60: unsigned long RootCluster;          
..\..\include\bootrec.h 61: unsigned short FSSectorNumber;      
..\..\include\bootrec.h 62: unsigned short BootSectorBackup;    
..\..\include\bootrec.h 63: unsigned char Reserved2[12];        
..\..\include\bootrec.h 64: unsigned char Drive;                
..\..\include\bootrec.h 65: unsigned char Reserved3;            
..\..\include\bootrec.h 66: unsigned char Signature;            
..\..\include\bootrec.h 67: unsigned long SerialNo;             
..\..\include\bootrec.h 68: unsigned char Label[11];            
..\..\include\bootrec.h 69: unsigned char FSID[8];              
..\..\include\bootrec.h 70: 
..\..\include\bootrec.h 71: 
..\..\include\bootrec.h 72: unsigned char Loader[420];          
..\..\include\bootrec.h 73: unsigned short MagicNumber; 
..\..\include\bootrec.h 74: 
..\..\include\bootrec.h 75: 
..\..\include\bootrec.h 76: } TBootFAT32;
..\..\include\bootrec.h 77: 
..\..\include\bootrec.h 78: 
..\..\include\bootrec.h 79: 
..\..\include\bootrec.h 80: 
..\..\include\bootrec.h 81: 
..\..\include\bootrec.h 82: 
..\..\include\bootrec.h 83: 
..\..\include\bootrec.h 84: 
..\..\include\bootrec.h 85: 
..\include\fat16.h 16: 
..\include\fat16.h 17: 
..\include\fat16.h 18: class CFAT16: public CFileSystem {
..\include\fat16.h 19: public:
..\include\fat16.h 20: CFAT16();
..\include\fat16.h 21: ~CFAT16();
..\include\fat16.h 22: int Mount(int Drive, unsigned long StartSector);
..\include\fat16.h 23: unsigned short ReadFile(const char *FileName, void *Buffer);
..\include\fat16.h 24: int WriteFile(const char *FileName, const void *Buffer);
..\include\fat16.h 25: 
..\include\fat16.h 26: void DosFileToRawFile(char *RawFile, const char *DosFile);
..\include\fat16.h 27: 
..\include\fat16.h 28: private:
..\include\fat16.h 29: class CFAT16DirEntry {
..\include\fat16.h 30: public:
..\include\fat16.h 31: unsigned char FileName[8];
..\include\fat16.h 32: unsigned char Extension[3];
..\include\fat16.h 33: unsigned char Attribute;
..\include\fat16.h 34: unsigned char Reserved[10];
..\include\fat16.h 35: unsigned short Time;
..\include\fat16.h 36: unsigned short Date;
..\include\fat16.h 37: unsigned short StartCluster;
..\include\fat16.h 38: unsigned long FileSize;
..\include\fat16.h 39: };
..\include\fat16.h 40: 
..\include\fat16.h 41: int Locate(const char *FileName, CFAT16DirEntry &Entry);
..\include\fat16.h 42: void ReadFAT(unsigned short Cluster);
..\include\fat16.h 43: void ReadDirectory(unsigned short Index, CFAT16DirEntry *Root);
..\include\fat16.h 44: 
..\include\fat16.h 45: void GetNextCluster(unsigned short &Cluster);
..\include\fat16.h 46: void ReadCluster(unsigned short Cluster, void *Buffer);
..\include\fat16.h 47: void WriteCluster(unsigned short Cluster, const void *Buffer);
..\include\fat16.h 48: 
..\include\fat16.h 49: 
..\include\fat16.h 50: TBootFAT16 BootSector;
..\include\fat16.h 51: 
..\include\fat16.h 52: unsigned short *FAT;
..\include\fat16.h 53: unsigned short FirstCluster;
..\include\fat16.h 54: unsigned short LastCluster;
..\include\fat16.h 55: 
..\include\fat16.h 56: unsigned short ClusterSize;
..\include\fat16.h 57: unsigned long FATStart;
..\include\fat16.h 58: unsigned long DirStart;
..\include\fat16.h 59: unsigned long DataStart;
..\include\fat16.h 60: };
..\include\fat16.h 61: 
..\include\fat16.h 62: 
..\include\fat16.h 63: 
ptab.cpp 16: 
..\..\include\bootrec.h 1: 
..\..\include\bootrec.h 2: 
..\..\include\bootrec.h 3: 
..\..\include\bootrec.h 4: 
..\..\include\bootrec.h 5: 
..\..\include\bootrec.h 6: 
..\..\include\bootrec.h 7: 
..\..\include\bootrec.h 8: 
..\..\include\bootrec.h 9: 
..\..\include\bootrec.h 10: 
..\..\include\bootrec.h 11: 
..\..\include\bootrec.h 12: 
..\..\include\bootrec.h 13: 
..\..\include\bootrec.h 14: 
..\..\include\bootrec.h 15: 
..\..\include\bootrec.h 16: 
..\..\include\bootrec.h 17: 
..\..\include\bootrec.h 18: 
..\..\include\bootrec.h 19: 
..\..\include\bootrec.h 20: 
..\..\include\bootrec.h 21: 
..\..\include\bootrec.h 22: 
..\..\include\bootrec.h 23: 
..\..\include\bootrec.h 24: 
..\..\include\bootrec.h 25: 
..\..\include\bootrec.h 26: 
..\..\include\bootrec.h 27: 
..\..\include\bootrec.h 28: 
..\..\include\bootrec.h 29: 
..\..\include\bootrec.h 30: 
..\..\include\bootrec.h 31: 
..\..\include\bootrec.h 32: 
..\..\include\bootrec.h 33: 
..\..\include\bootrec.h 34: 
..\..\include\bootrec.h 35: 
..\..\include\bootrec.h 36: 
..\..\include\bootrec.h 37: 
..\..\include\bootrec.h 38: 
..\..\include\bootrec.h 39: 
..\..\include\bootrec.h 40: 
..\..\include\bootrec.h 41: 
..\..\include\bootrec.h 42: 
..\..\include\bootrec.h 43: 
..\..\include\bootrec.h 44: 
..\..\include\bootrec.h 45: 
..\..\include\bootrec.h 46: 
..\..\include\bootrec.h 47: 
..\..\include\bootrec.h 48: 
..\..\include\bootrec.h 49: 
..\..\include\bootrec.h 50: 
..\..\include\bootrec.h 51: 
..\..\include\bootrec.h 52: 
..\..\include\bootrec.h 53: 
..\..\include\bootrec.h 54: 
..\..\include\bootrec.h 55: 
..\..\include\bootrec.h 56: 
..\..\include\bootrec.h 57: 
..\..\include\bootrec.h 58: 
..\..\include\bootrec.h 59: 
..\..\include\bootrec.h 60: 
..\..\include\bootrec.h 61: 
..\..\include\bootrec.h 62: 
..\..\include\bootrec.h 63: 
..\..\include\bootrec.h 64: 
..\..\include\bootrec.h 65: 
..\..\include\bootrec.h 66: 
..\..\include\bootrec.h 67: 
..\..\include\bootrec.h 68: 
..\..\include\bootrec.h 69: 
..\..\include\bootrec.h 70: 
..\..\include\bootrec.h 71: 
..\..\include\bootrec.h 72: 
..\..\include\bootrec.h 73: 
..\..\include\bootrec.h 74: 
..\..\include\bootrec.h 75: 
..\..\include\bootrec.h 76: 
..\..\include\bootrec.h 77: 
..\..\include\bootrec.h 78: 
..\..\include\bootrec.h 79: 
..\..\include\bootrec.h 80: 
..\..\include\bootrec.h 81: 
..\..\include\bootrec.h 82: 
..\..\include\bootrec.h 83: 
..\..\include\bootrec.h 84: 
..\..\include\bootrec.h 85: 
ptab.cpp 17: 
..\..\include\items.h 1: 
..\..\include\items.h 2: 
..\..\include\items.h 3: 
..\..\include\items.h 4: 
..\..\include\items.h 5: 
..\..\include\items.h 6: 
..\..\include\items.h 7: 
..\..\include\items.h 8: 
..\..\include\items.h 9: 
..\..\include\items.h 10: 
..\..\include\items.h 11: 
..\..\include\items.h 12: 
..\..\include\items.h 13: 
..\..\include\items.h 14: 
..\..\include\newdefs.h 1: 
..\..\include\newdefs.h 2: 
..\..\include\newdefs.h 3: 
..\..\include\newdefs.h 4: 
..\..\include\newdefs.h 5: 
..\..\include\newdefs.h 6: 
..\..\include\newdefs.h 7: 
..\..\include\newdefs.h 8: 
..\..\include\newdefs.h 9: 
..\..\include\newdefs.h 10: 
..\..\include\newdefs.h 11: 
..\..\include\newdefs.h 12: 
..\..\include\newdefs.h 13: 
..\..\include\newdefs.h 14: 
..\..\include\newdefs.h 15: 
..\..\include\newdefs.h 16: 
..\..\include\newdefs.h 17: 
..\..\include\newdefs.h 18: 
..\..\include\newdefs.h 19: 
..\..\include\newdefs.h 20: 
..\..\include\newdefs.h 21: 
..\..\include\newdefs.h 22: 
..\..\include\newdefs.h 23: 
..\..\include\newdefs.h 24: 
..\..\include\newdefs.h 25: 
..\..\include\newdefs.h 26: 
..\..\include\newdefs.h 27: 
..\..\include\newdefs.h 28: 
..\..\include\newdefs.h 29: 
..\..\include\newdefs.h 30: 
..\..\include\newdefs.h 31: 
..\..\include\newdefs.h 32: 
..\..\include\newdefs.h 33: 
..\..\include\newdefs.h 34: 
..\..\include\newdefs.h 35: 
..\..\include\newdefs.h 36: typedef int bool;
..\..\include\newdefs.h 37: 
..\..\include\newdefs.h 38: 
..\..\include\newdefs.h 39: 
..\..\include\newdefs.h 40: 
..\..\include\newdefs.h 41: 
..\..\include\newdefs.h 42: 
..\..\include\newdefs.h 43: 
..\..\include\newdefs.h 44: 
..\..\include\newdefs.h 45: 
..\..\include\newdefs.h 46: 
..\..\include\newdefs.h 47: 
..\..\include\newdefs.h 48: 
..\..\include\newdefs.h 49: 
..\..\include\newdefs.h 50: 
..\..\include\newdefs.h 51: 
..\..\include\newdefs.h 52: 
..\..\include\newdefs.h 53: typedef unsigned short size_t;
..\..\include\newdefs.h 54: 
..\..\include\newdefs.h 55: 
..\..\include\newdefs.h 56: 
..\..\include\newdefs.h 57: 
..\..\include\newdefs.h 58: 
..\..\include\newdefs.h 59: 
..\..\include\items.h 15: 
..\..\include\lastconf.h 1: 
..\..\include\lastconf.h 2: 
..\..\include\lastconf.h 3: 
..\..\include\lastconf.h 4: 
..\..\include\lastconf.h 5: 
..\..\include\lastconf.h 6: 
..\..\include\lastconf.h 7: 
..\..\include\lastconf.h 8: 
..\..\include\lastconf.h 9: 
..\..\include\lastconf.h 10: 
..\..\include\lastconf.h 11: 
..\..\include\lastconf.h 12: 
..\..\include\lastconf.h 13: 
..\..\include\lastconf.h 14: 
..\..\include\newdefs.h 1: 
..\..\include\newdefs.h 2: 
..\..\include\newdefs.h 3: 
..\..\include\newdefs.h 4: 
..\..\include\newdefs.h 5: 
..\..\include\newdefs.h 6: 
..\..\include\newdefs.h 7: 
..\..\include\newdefs.h 8: 
..\..\include\newdefs.h 9: 
..\..\include\newdefs.h 10: 
..\..\include\newdefs.h 11: 
..\..\include\newdefs.h 12: 
..\..\include\newdefs.h 13: 
..\..\include\newdefs.h 14: 
..\..\include\newdefs.h 15: 
..\..\include\newdefs.h 16: 
..\..\include\newdefs.h 17: 
..\..\include\newdefs.h 18: 
..\..\include\newdefs.h 19: 
..\..\include\newdefs.h 20: 
..\..\include\newdefs.h 21: 
..\..\include\newdefs.h 22: 
..\..\include\newdefs.h 23: 
..\..\include\newdefs.h 24: 
..\..\include\newdefs.h 25: 
..\..\include\newdefs.h 26: 
..\..\include\newdefs.h 27: 
..\..\include\newdefs.h 28: 
..\..\include\newdefs.h 29: 
..\..\include\newdefs.h 30: 
..\..\include\newdefs.h 31: 
..\..\include\newdefs.h 32: 
..\..\include\newdefs.h 33: 
..\..\include\newdefs.h 34: 
..\..\include\newdefs.h 35: 
..\..\include\newdefs.h 36: 
..\..\include\newdefs.h 37: 
..\..\include\newdefs.h 38: 
..\..\include\newdefs.h 39: 
..\..\include\newdefs.h 40: 
..\..\include\newdefs.h 41: 
..\..\include\newdefs.h 42: 
..\..\include\newdefs.h 43: 
..\..\include\newdefs.h 44: 
..\..\include\newdefs.h 45: 
..\..\include\newdefs.h 46: 
..\..\include\newdefs.h 47: 
..\..\include\newdefs.h 48: 
..\..\include\newdefs.h 49: 
..\..\include\newdefs.h 50: 
..\..\include\newdefs.h 51: 
..\..\include\newdefs.h 52: 
..\..\include\newdefs.h 53: 
..\..\include\newdefs.h 54: 
..\..\include\newdefs.h 55: 
..\..\include\newdefs.h 56: 
..\..\include\newdefs.h 57: 
..\..\include\newdefs.h 58: 
..\..\include\newdefs.h 59: 
..\..\include\lastconf.h 15: 
..\include\ptab.h 1: 
..\include\ptab.h 2: 
..\include\ptab.h 3: 
..\include\ptab.h 4: 
..\include\ptab.h 5: 
..\include\ptab.h 6: 
..\include\ptab.h 7: 
..\include\ptab.h 8: 
..\include\ptab.h 9: 
..\include\ptab.h 10: 
..\include\ptab.h 11: 
..\include\ptab.h 12: 
..\include\ptab.h 13: 
..\include\ptab.h 14: 
..\include\ptab.h 15: 
..\include\ptab.h 16: 
..\include\ptab.h 17: 
..\include\ptab.h 18: 
..\include\ptab.h 19: 
..\include\ptab.h 20: 
..\include\ptab.h 21: 
..\include\ptab.h 22: 
..\include\ptab.h 23: 
..\include\ptab.h 24: 
..\include\ptab.h 25: 
..\include\ptab.h 26: 
..\include\ptab.h 27: 
..\include\ptab.h 28: 
..\include\ptab.h 29: 
..\include\ptab.h 30: 
..\include\ptab.h 31: 
..\include\ptab.h 32: 
..\include\ptab.h 33: 
..\include\ptab.h 34: 
..\include\ptab.h 35: 
..\include\ptab.h 36: 
..\include\ptab.h 37: 
..\include\ptab.h 38: 
..\include\ptab.h 39: 
..\include\ptab.h 40: 
..\include\ptab.h 41: 
..\include\ptab.h 42: 
..\include\ptab.h 43: 
..\include\ptab.h 44: 
..\include\ptab.h 45: 
..\include\ptab.h 46: 
..\include\ptab.h 47: 
..\include\ptab.h 48: 
..\include\ptab.h 49: 
..\include\ptab.h 50: 
..\include\ptab.h 51: 
..\include\ptab.h 52: 
..\include\ptab.h 53: 
..\include\ptab.h 54: 
..\include\ptab.h 55: 
..\include\ptab.h 56: 
..\include\ptab.h 57: 
..\include\ptab.h 58: 
..\include\ptab.h 59: 
..\include\ptab.h 60: 
..\include\ptab.h 61: 
..\include\ptab.h 62: 
..\include\ptab.h 63: 
..\include\ptab.h 64: 
..\include\ptab.h 65: 
..\include\ptab.h 66: 
..\include\ptab.h 67: 
..\include\ptab.h 68: 
..\include\ptab.h 69: 
..\include\ptab.h 70: 
..\include\ptab.h 71: 
..\include\ptab.h 72: 
..\include\ptab.h 73: 
..\include\ptab.h 74: 
..\include\ptab.h 75: 
..\include\ptab.h 76: 
..\include\ptab.h 77: 
..\include\ptab.h 78: 
..\include\ptab.h 79: 
..\include\ptab.h 80: 
..\include\ptab.h 81: 
..\include\ptab.h 82: 
..\include\ptab.h 83: 
..\include\ptab.h 84: 
..\include\ptab.h 85: 
..\include\ptab.h 86: 
..\include\ptab.h 87: 
..\include\ptab.h 88: 
..\include\ptab.h 89: 
..\include\ptab.h 90: 
..\include\ptab.h 91: 
..\include\ptab.h 92: 
..\include\ptab.h 93: 
..\include\ptab.h 94: 
..\include\ptab.h 95: 
..\include\ptab.h 96: 
..\include\ptab.h 97: 
..\include\ptab.h 98: 
..\include\ptab.h 99: 
..\include\ptab.h 100: 
..\include\ptab.h 101: 
..\include\ptab.h 102: 
..\include\ptab.h 103: 
..\include\ptab.h 104: 
..\include\ptab.h 105: 
..\..\include\lastconf.h 16: 
..\include\fs.h 1: 
..\include\fs.h 2: 
..\include\fs.h 3: 
..\include\fs.h 4: 
..\include\fs.h 5: 
..\include\fs.h 6: 
..\include\fs.h 7: 
..\include\fs.h 8: 
..\include\fs.h 9: 
..\include\fs.h 10: 
..\include\fs.h 11: 
..\include\fs.h 12: 
..\include\fs.h 13: 
..\include\fs.h 14: 
..\include\fs.h 15: 
..\include\fs.h 16: 
..\include\fs.h 17: 
..\include\fs.h 18: 
..\include\fs.h 19: 
..\include\fs.h 20: 
..\include\fs.h 21: 
..\include\fs.h 22: 
..\include\fs.h 23: 
..\include\fs.h 24: 
..\include\fs.h 25: 
..\include\fs.h 26: 
..\include\fs.h 27: 
..\include\fs.h 28: 
..\include\fs.h 29: 
..\include\fs.h 30: 
..\include\fs.h 31: 
..\include\fs.h 32: 
..\include\fs.h 33: 
..\..\include\lastconf.h 17: 
..\..\include\lastconf.h 18: typedef struct {
..\..\include\lastconf.h 19: unsigned char Drive;
..\..\include\lastconf.h 20: unsigned long StartSector;
..\..\include\lastconf.h 21: } TPartKey;
..\..\include\lastconf.h 22: 
..\..\include\lastconf.h 23: typedef struct {
..\..\include\lastconf.h 24: int PartitionCount;
..\..\include\lastconf.h 25: TPartKey LastPartList[92];
..\..\include\lastconf.h 26: char Reserved[50]; 
..\..\include\lastconf.h 27: } TLastConfig;
..\..\include\lastconf.h 28: 
..\..\include\lastconf.h 29: class CLastConfig {
..\..\include\lastconf.h 30: public:
..\..\include\lastconf.h 31: CLastConfig(CFileSystem *FileSystemToUse, CPartList *PartListToUse);
..\..\include\lastconf.h 32: ~CLastConfig();
..\..\include\lastconf.h 33: 
..\..\include\lastconf.h 34: const short *GetRelocTable();
..\..\include\lastconf.h 35: void SetNewConfig();
..\..\include\lastconf.h 36: private:
..\..\include\lastconf.h 37: TLastConfig *FileData;
..\..\include\lastconf.h 38: short RelocTable[92];
..\..\include\lastconf.h 39: CFileSystem *FileSystem;
..\..\include\lastconf.h 40: CPartList *PartList;
..\..\include\lastconf.h 41: };
..\..\include\lastconf.h 42: 
..\..\include\lastconf.h 43: 
..\..\include\lastconf.h 44: 
..\..\include\items.h 16: 
..\include\ptab.h 1: 
..\include\ptab.h 2: 
..\include\ptab.h 3: 
..\include\ptab.h 4: 
..\include\ptab.h 5: 
..\include\ptab.h 6: 
..\include\ptab.h 7: 
..\include\ptab.h 8: 
..\include\ptab.h 9: 
..\include\ptab.h 10: 
..\include\ptab.h 11: 
..\include\ptab.h 12: 
..\include\ptab.h 13: 
..\include\ptab.h 14: 
..\include\ptab.h 15: 
..\include\ptab.h 16: 
..\include\ptab.h 17: 
..\include\ptab.h 18: 
..\include\ptab.h 19: 
..\include\ptab.h 20: 
..\include\ptab.h 21: 
..\include\ptab.h 22: 
..\include\ptab.h 23: 
..\include\ptab.h 24: 
..\include\ptab.h 25: 
..\include\ptab.h 26: 
..\include\ptab.h 27: 
..\include\ptab.h 28: 
..\include\ptab.h 29: 
..\include\ptab.h 30: 
..\include\ptab.h 31: 
..\include\ptab.h 32: 
..\include\ptab.h 33: 
..\include\ptab.h 34: 
..\include\ptab.h 35: 
..\include\ptab.h 36: 
..\include\ptab.h 37: 
..\include\ptab.h 38: 
..\include\ptab.h 39: 
..\include\ptab.h 40: 
..\include\ptab.h 41: 
..\include\ptab.h 42: 
..\include\ptab.h 43: 
..\include\ptab.h 44: 
..\include\ptab.h 45: 
..\include\ptab.h 46: 
..\include\ptab.h 47: 
..\include\ptab.h 48: 
..\include\ptab.h 49: 
..\include\ptab.h 50: 
..\include\ptab.h 51: 
..\include\ptab.h 52: 
..\include\ptab.h 53: 
..\include\ptab.h 54: 
..\include\ptab.h 55: 
..\include\ptab.h 56: 
..\include\ptab.h 57: 
..\include\ptab.h 58: 
..\include\ptab.h 59: 
..\include\ptab.h 60: 
..\include\ptab.h 61: 
..\include\ptab.h 62: 
..\include\ptab.h 63: 
..\include\ptab.h 64: 
..\include\ptab.h 65: 
..\include\ptab.h 66: 
..\include\ptab.h 67: 
..\include\ptab.h 68: 
..\include\ptab.h 69: 
..\include\ptab.h 70: 
..\include\ptab.h 71: 
..\include\ptab.h 72: 
..\include\ptab.h 73: 
..\include\ptab.h 74: 
..\include\ptab.h 75: 
..\include\ptab.h 76: 
..\include\ptab.h 77: 
..\include\ptab.h 78: 
..\include\ptab.h 79: 
..\include\ptab.h 80: 
..\include\ptab.h 81: 
..\include\ptab.h 82: 
..\include\ptab.h 83: 
..\include\ptab.h 84: 
..\include\ptab.h 85: 
..\include\ptab.h 86: 
..\include\ptab.h 87: 
..\include\ptab.h 88: 
..\include\ptab.h 89: 
..\include\ptab.h 90: 
..\include\ptab.h 91: 
..\include\ptab.h 92: 
..\include\ptab.h 93: 
..\include\ptab.h 94: 
..\include\ptab.h 95: 
..\include\ptab.h 96: 
..\include\ptab.h 97: 
..\include\ptab.h 98: 
..\include\ptab.h 99: 
..\include\ptab.h 100: 
..\include\ptab.h 101: 
..\include\ptab.h 102: 
..\include\ptab.h 103: 
..\include\ptab.h 104: 
..\include\ptab.h 105: 
..\..\include\items.h 17: 
..\include\fs.h 1: 
..\include\fs.h 2: 
..\include\fs.h 3: 
..\include\fs.h 4: 
..\include\fs.h 5: 
..\include\fs.h 6: 
..\include\fs.h 7: 
..\include\fs.h 8: 
..\include\fs.h 9: 
..\include\fs.h 10: 
..\include\fs.h 11: 
..\include\fs.h 12: 
..\include\fs.h 13: 
..\include\fs.h 14: 
..\include\fs.h 15: 
..\include\fs.h 16: 
..\include\fs.h 17: 
..\include\fs.h 18: 
..\include\fs.h 19: 
..\include\fs.h 20: 
..\include\fs.h 21: 
..\include\fs.h 22: 
..\include\fs.h 23: 
..\include\fs.h 24: 
..\include\fs.h 25: 
..\include\fs.h 26: 
..\include\fs.h 27: 
..\include\fs.h 28: 
..\include\fs.h 29: 
..\include\fs.h 30: 
..\include\fs.h 31: 
..\include\fs.h 32: 
..\include\fs.h 33: 
..\..\include\items.h 18: 
..\..\include\fatfix.h 1: 
..\..\include\fatfix.h 2: 
..\..\include\fatfix.h 3: 
..\..\include\fatfix.h 4: 
..\..\include\fatfix.h 5: 
..\..\include\fatfix.h 6: 
..\..\include\fatfix.h 7: 
..\..\include\fatfix.h 8: 
..\..\include\fatfix.h 9: 
..\..\include\fatfix.h 10: 
..\..\include\fatfix.h 11: 
..\..\include\fatfix.h 12: 
..\..\include\fatfix.h 13: 
..\..\include\fatfix.h 14: 
..\..\include\newdefs.h 1: 
..\..\include\newdefs.h 2: 
..\..\include\newdefs.h 3: 
..\..\include\newdefs.h 4: 
..\..\include\newdefs.h 5: 
..\..\include\newdefs.h 6: 
..\..\include\newdefs.h 7: 
..\..\include\newdefs.h 8: 
..\..\include\newdefs.h 9: 
..\..\include\newdefs.h 10: 
..\..\include\newdefs.h 11: 
..\..\include\newdefs.h 12: 
..\..\include\newdefs.h 13: 
..\..\include\newdefs.h 14: 
..\..\include\newdefs.h 15: 
..\..\include\newdefs.h 16: 
..\..\include\newdefs.h 17: 
..\..\include\newdefs.h 18: 
..\..\include\newdefs.h 19: 
..\..\include\newdefs.h 20: 
..\..\include\newdefs.h 21: 
..\..\include\newdefs.h 22: 
..\..\include\newdefs.h 23: 
..\..\include\newdefs.h 24: 
..\..\include\newdefs.h 25: 
..\..\include\newdefs.h 26: 
..\..\include\newdefs.h 27: 
..\..\include\newdefs.h 28: 
..\..\include\newdefs.h 29: 
..\..\include\newdefs.h 30: 
..\..\include\newdefs.h 31: 
..\..\include\newdefs.h 32: 
..\..\include\newdefs.h 33: 
..\..\include\newdefs.h 34: 
..\..\include\newdefs.h 35: 
..\..\include\newdefs.h 36: 
..\..\include\newdefs.h 37: 
..\..\include\newdefs.h 38: 
..\..\include\newdefs.h 39: 
..\..\include\newdefs.h 40: 
..\..\include\newdefs.h 41: 
..\..\include\newdefs.h 42: 
..\..\include\newdefs.h 43: 
..\..\include\newdefs.h 44: 
..\..\include\newdefs.h 45: 
..\..\include\newdefs.h 46: 
..\..\include\newdefs.h 47: 
..\..\include\newdefs.h 48: 
..\..\include\newdefs.h 49: 
..\..\include\newdefs.h 50: 
..\..\include\newdefs.h 51: 
..\..\include\newdefs.h 52: 
..\..\include\newdefs.h 53: 
..\..\include\newdefs.h 54: 
..\..\include\newdefs.h 55: 
..\..\include\newdefs.h 56: 
..\..\include\newdefs.h 57: 
..\..\include\newdefs.h 58: 
..\..\include\newdefs.h 59: 
..\..\include\fatfix.h 15: 
..\..\include\fatfix.h 16: 
..\include\fat16.h 1: 
..\include\fat16.h 2: 
..\include\fat16.h 3: 
..\include\fat16.h 4: 
..\include\fat16.h 5: 
..\include\fat16.h 6: 
..\include\fat16.h 7: 
..\include\fat16.h 8: 
..\include\fat16.h 9: 
..\include\fat16.h 10: 
..\include\fat16.h 11: 
..\include\fat16.h 12: 
..\include\fat16.h 13: 
..\include\fat16.h 14: 
..\include\fat16.h 15: 
..\include\fat16.h 16: 
..\include\fat16.h 17: 
..\include\fat16.h 18: 
..\include\fat16.h 19: 
..\include\fat16.h 20: 
..\include\fat16.h 21: 
..\include\fat16.h 22: 
..\include\fat16.h 23: 
..\include\fat16.h 24: 
..\include\fat16.h 25: 
..\include\fat16.h 26: 
..\include\fat16.h 27: 
..\include\fat16.h 28: 
..\include\fat16.h 29: 
..\include\fat16.h 30: 
..\include\fat16.h 31: 
..\include\fat16.h 32: 
..\include\fat16.h 33: 
..\include\fat16.h 34: 
..\include\fat16.h 35: 
..\include\fat16.h 36: 
..\include\fat16.h 37: 
..\include\fat16.h 38: 
..\include\fat16.h 39: 
..\include\fat16.h 40: 
..\include\fat16.h 41: 
..\include\fat16.h 42: 
..\include\fat16.h 43: 
..\include\fat16.h 44: 
..\include\fat16.h 45: 
..\include\fat16.h 46: 
..\include\fat16.h 47: 
..\include\fat16.h 48: 
..\include\fat16.h 49: 
..\include\fat16.h 50: 
..\include\fat16.h 51: 
..\include\fat16.h 52: 
..\include\fat16.h 53: 
..\include\fat16.h 54: 
..\include\fat16.h 55: 
..\include\fat16.h 56: 
..\include\fat16.h 57: 
..\include\fat16.h 58: 
..\include\fat16.h 59: 
..\include\fat16.h 60: 
..\include\fat16.h 61: 
..\include\fat16.h 62: 
..\include\fat16.h 63: 
..\..\include\fatfix.h 17: 
..\..\include\fat32.h 1: 
..\..\include\fat32.h 2: 
..\..\include\fat32.h 3: 
..\..\include\fat32.h 4: 
..\..\include\fat32.h 5: 
..\..\include\fat32.h 6: 
..\..\include\fat32.h 7: 
..\..\include\fat32.h 8: 
..\..\include\fat32.h 9: 
..\..\include\fat32.h 10: 
..\..\include\fat32.h 11: 
..\..\include\fat32.h 12: 
..\..\include\fat32.h 13: 
..\..\include\fat32.h 14: 
..\include\fs.h 1: 
..\include\fs.h 2: 
..\include\fs.h 3: 
..\include\fs.h 4: 
..\include\fs.h 5: 
..\include\fs.h 6: 
..\include\fs.h 7: 
..\include\fs.h 8: 
..\include\fs.h 9: 
..\include\fs.h 10: 
..\include\fs.h 11: 
..\include\fs.h 12: 
..\include\fs.h 13: 
..\include\fs.h 14: 
..\include\fs.h 15: 
..\include\fs.h 16: 
..\include\fs.h 17: 
..\include\fs.h 18: 
..\include\fs.h 19: 
..\include\fs.h 20: 
..\include\fs.h 21: 
..\include\fs.h 22: 
..\include\fs.h 23: 
..\include\fs.h 24: 
..\include\fs.h 25: 
..\include\fs.h 26: 
..\include\fs.h 27: 
..\include\fs.h 28: 
..\include\fs.h 29: 
..\include\fs.h 30: 
..\include\fs.h 31: 
..\include\fs.h 32: 
..\include\fs.h 33: 
..\..\include\fat32.h 15: 
..\..\include\bootrec.h 1: 
..\..\include\bootrec.h 2: 
..\..\include\bootrec.h 3: 
..\..\include\bootrec.h 4: 
..\..\include\bootrec.h 5: 
..\..\include\bootrec.h 6: 
..\..\include\bootrec.h 7: 
..\..\include\bootrec.h 8: 
..\..\include\bootrec.h 9: 
..\..\include\bootrec.h 10: 
..\..\include\bootrec.h 11: 
..\..\include\bootrec.h 12: 
..\..\include\bootrec.h 13: 
..\..\include\bootrec.h 14: 
..\..\include\bootrec.h 15: 
..\..\include\bootrec.h 16: 
..\..\include\bootrec.h 17: 
..\..\include\bootrec.h 18: 
..\..\include\bootrec.h 19: 
..\..\include\bootrec.h 20: 
..\..\include\bootrec.h 21: 
..\..\include\bootrec.h 22: 
..\..\include\bootrec.h 23: 
..\..\include\bootrec.h 24: 
..\..\include\bootrec.h 25: 
..\..\include\bootrec.h 26: 
..\..\include\bootrec.h 27: 
..\..\include\bootrec.h 28: 
..\..\include\bootrec.h 29: 
..\..\include\bootrec.h 30: 
..\..\include\bootrec.h 31: 
..\..\include\bootrec.h 32: 
..\..\include\bootrec.h 33: 
..\..\include\bootrec.h 34: 
..\..\include\bootrec.h 35: 
..\..\include\bootrec.h 36: 
..\..\include\bootrec.h 37: 
..\..\include\bootrec.h 38: 
..\..\include\bootrec.h 39: 
..\..\include\bootrec.h 40: 
..\..\include\bootrec.h 41: 
..\..\include\bootrec.h 42: 
..\..\include\bootrec.h 43: 
..\..\include\bootrec.h 44: 
..\..\include\bootrec.h 45: 
..\..\include\bootrec.h 46: 
..\..\include\bootrec.h 47: 
..\..\include\bootrec.h 48: 
..\..\include\bootrec.h 49: 
..\..\include\bootrec.h 50: 
..\..\include\bootrec.h 51: 
..\..\include\bootrec.h 52: 
..\..\include\bootrec.h 53: 
..\..\include\bootrec.h 54: 
..\..\include\bootrec.h 55: 
..\..\include\bootrec.h 56: 
..\..\include\bootrec.h 57: 
..\..\include\bootrec.h 58: 
..\..\include\bootrec.h 59: 
..\..\include\bootrec.h 60: 
..\..\include\bootrec.h 61: 
..\..\include\bootrec.h 62: 
..\..\include\bootrec.h 63: 
..\..\include\bootrec.h 64: 
..\..\include\bootrec.h 65: 
..\..\include\bootrec.h 66: 
..\..\include\bootrec.h 67: 
..\..\include\bootrec.h 68: 
..\..\include\bootrec.h 69: 
..\..\include\bootrec.h 70: 
..\..\include\bootrec.h 71: 
..\..\include\bootrec.h 72: 
..\..\include\bootrec.h 73: 
..\..\include\bootrec.h 74: 
..\..\include\bootrec.h 75: 
..\..\include\bootrec.h 76: 
..\..\include\bootrec.h 77: 
..\..\include\bootrec.h 78: 
..\..\include\bootrec.h 79: 
..\..\include\bootrec.h 80: 
..\..\include\bootrec.h 81: 
..\..\include\bootrec.h 82: 
..\..\include\bootrec.h 83: 
..\..\include\bootrec.h 84: 
..\..\include\bootrec.h 85: 
..\..\include\fat32.h 16: 
..\..\include\fat32.h 17: 
..\..\include\fat32.h 18: 
..\..\include\fat32.h 19: 
..\..\include\fat32.h 20: 
..\..\include\fat32.h 21: 
..\..\include\fat32.h 22: 
..\..\include\fat32.h 23: 
..\..\include\fat32.h 24: 
..\..\include\fat32.h 25: 
..\..\include\fat32.h 26: 
..\..\include\fat32.h 27: 
..\..\include\fat32.h 28: 
..\..\include\fat32.h 29: 
..\..\include\fat32.h 30: 
..\..\include\fat32.h 31: 
..\..\include\fat32.h 32: 
..\..\include\fat32.h 33: 
..\..\include\fat32.h 34: 
..\..\include\fat32.h 35: 
..\..\include\fat32.h 36: 
..\..\include\fat32.h 37: 
..\..\include\fat32.h 38: 
..\..\include\fat32.h 39: 
..\..\include\fat32.h 40: 
..\..\include\fat32.h 41: 
..\..\include\fat32.h 42: 
..\..\include\fat32.h 43: 
..\..\include\fat32.h 44: 
..\..\include\fat32.h 45: 
..\..\include\fat32.h 46: 
..\..\include\fat32.h 47: 
..\..\include\fat32.h 48: 
..\..\include\fat32.h 49: 
..\..\include\fat32.h 50: 
..\..\include\fat32.h 51: 
..\..\include\fat32.h 52: 
..\..\include\fat32.h 53: 
..\..\include\fat32.h 54: 
..\..\include\fat32.h 55: typedef struct {
..\..\include\fat32.h 56: unsigned char FileName[8];
..\..\include\fat32.h 57: unsigned char Extension[3];
..\..\include\fat32.h 58: unsigned char Attribute;
..\..\include\fat32.h 59: unsigned short NT;				
..\..\include\fat32.h 60: unsigned short CreateTime;
..\..\include\fat32.h 61: unsigned short CreateDate;
..\..\include\fat32.h 62: unsigned short Accessed;
..\..\include\fat32.h 63: unsigned short StartClusterH;
..\..\include\fat32.h 64: unsigned short Time;
..\..\include\fat32.h 65: unsigned short Date;
..\..\include\fat32.h 66: unsigned short StartClusterL;
..\..\include\fat32.h 67: unsigned long FileSize;
..\..\include\fat32.h 68: } TFAT32DirEntry;
..\..\include\fat32.h 69: 
..\..\include\fat32.h 70: 
..\..\include\fat32.h 71: 
..\..\include\fat32.h 72: class CFAT32: public CFileSystem {
..\..\include\fat32.h 73: public:
..\..\include\fat32.h 74: CFAT32();
..\..\include\fat32.h 75: ~CFAT32();
..\..\include\fat32.h 76: int Mount(int Drive, unsigned long StartSector);
..\..\include\fat32.h 77: unsigned short ReadFile(const char *FileName, void *Buffer);
..\..\include\fat32.h 78: int WriteFile(const char *FileName, void *Buffer);
..\..\include\fat32.h 79: private:
..\..\include\fat32.h 80: int Locate(const char *FileName, TFAT32DirEntry &Entry);
..\..\include\fat32.h 81: void ReadFAT(long Cluster);
..\..\include\fat32.h 82: 
..\..\include\fat32.h 83: void GetNextCluster(long &Cluster);
..\..\include\fat32.h 84: void ReadCluster(long Cluster, void *Buffer);
..\..\include\fat32.h 85: void WriteCluster(long Cluster, void *Buffer);
..\..\include\fat32.h 86: void GetCurFatDateTime(unsigned short *pfatdate,unsigned short *pfattime);
..\..\include\fat32.h 87: void UpdateFileDateTime(const char *FileName);
..\..\include\fat32.h 88: 
..\..\include\fat32.h 89: 
..\..\include\fat32.h 90: TBootFAT32 BootSector;
..\..\include\fat32.h 91: 
..\..\include\fat32.h 92: long *FAT;
..\..\include\fat32.h 93: long FirstCluster;
..\..\include\fat32.h 94: long LastCluster;
..\..\include\fat32.h 95: 
..\..\include\fat32.h 96: unsigned short ClusterSize;
..\..\include\fat32.h 97: unsigned long FATStart;
..\..\include\fat32.h 98: unsigned long DataStart;
..\..\include\fat32.h 99: };
..\..\include\fat32.h 100: 
..\..\include\fat32.h 101: 
..\..\include\fat32.h 102: 
..\..\include\fatfix.h 18: 
..\include\ptab.h 1: 
..\include\ptab.h 2: 
..\include\ptab.h 3: 
..\include\ptab.h 4: 
..\include\ptab.h 5: 
..\include\ptab.h 6: 
..\include\ptab.h 7: 
..\include\ptab.h 8: 
..\include\ptab.h 9: 
..\include\ptab.h 10: 
..\include\ptab.h 11: 
..\include\ptab.h 12: 
..\include\ptab.h 13: 
..\include\ptab.h 14: 
..\include\ptab.h 15: 
..\include\ptab.h 16: 
..\include\ptab.h 17: 
..\include\ptab.h 18: 
..\include\ptab.h 19: 
..\include\ptab.h 20: 
..\include\ptab.h 21: 
..\include\ptab.h 22: 
..\include\ptab.h 23: 
..\include\ptab.h 24: 
..\include\ptab.h 25: 
..\include\ptab.h 26: 
..\include\ptab.h 27: 
..\include\ptab.h 28: 
..\include\ptab.h 29: 
..\include\ptab.h 30: 
..\include\ptab.h 31: 
..\include\ptab.h 32: 
..\include\ptab.h 33: 
..\include\ptab.h 34: 
..\include\ptab.h 35: 
..\include\ptab.h 36: 
..\include\ptab.h 37: 
..\include\ptab.h 38: 
..\include\ptab.h 39: 
..\include\ptab.h 40: 
..\include\ptab.h 41: 
..\include\ptab.h 42: 
..\include\ptab.h 43: 
..\include\ptab.h 44: 
..\include\ptab.h 45: 
..\include\ptab.h 46: 
..\include\ptab.h 47: 
..\include\ptab.h 48: 
..\include\ptab.h 49: 
..\include\ptab.h 50: 
..\include\ptab.h 51: 
..\include\ptab.h 52: 
..\include\ptab.h 53: 
..\include\ptab.h 54: 
..\include\ptab.h 55: 
..\include\ptab.h 56: 
..\include\ptab.h 57: 
..\include\ptab.h 58: 
..\include\ptab.h 59: 
..\include\ptab.h 60: 
..\include\ptab.h 61: 
..\include\ptab.h 62: 
..\include\ptab.h 63: 
..\include\ptab.h 64: 
..\include\ptab.h 65: 
..\include\ptab.h 66: 
..\include\ptab.h 67: 
..\include\ptab.h 68: 
..\include\ptab.h 69: 
..\include\ptab.h 70: 
..\include\ptab.h 71: 
..\include\ptab.h 72: 
..\include\ptab.h 73: 
..\include\ptab.h 74: 
..\include\ptab.h 75: 
..\include\ptab.h 76: 
..\include\ptab.h 77: 
..\include\ptab.h 78: 
..\include\ptab.h 79: 
..\include\ptab.h 80: 
..\include\ptab.h 81: 
..\include\ptab.h 82: 
..\include\ptab.h 83: 
..\include\ptab.h 84: 
..\include\ptab.h 85: 
..\include\ptab.h 86: 
..\include\ptab.h 87: 
..\include\ptab.h 88: 
..\include\ptab.h 89: 
..\include\ptab.h 90: 
..\include\ptab.h 91: 
..\include\ptab.h 92: 
..\include\ptab.h 93: 
..\include\ptab.h 94: 
..\include\ptab.h 95: 
..\include\ptab.h 96: 
..\include\ptab.h 97: 
..\include\ptab.h 98: 
..\include\ptab.h 99: 
..\include\ptab.h 100: 
..\include\ptab.h 101: 
..\include\ptab.h 102: 
..\include\ptab.h 103: 
..\include\ptab.h 104: 
..\include\ptab.h 105: 
..\..\include\fatfix.h 19: 
..\..\include\fatfix.h 20: typedef union {
..\..\include\fatfix.h 21: TBootFAT16 BootFAT16;
..\..\include\fatfix.h 22: TBootFAT32 BootFAT32;
..\..\include\fatfix.h 23: } TBootRecord;
..\..\include\fatfix.h 24: 
..\..\include\fatfix.h 25: class CDriveFix {
..\..\include\fatfix.h 26: public:
..\..\include\fatfix.h 27: CDriveFix();
..\..\include\fatfix.h 28: ~CDriveFix();
..\..\include\fatfix.h 29: int CanFixFAT(const TPartition *Partition);
..\..\include\fatfix.h 30: void FixFAT(int Drive, int FSType, TBootRecord *BootRecord);
..\..\include\fatfix.h 31: static void SwapDrive(int Drive);
..\..\include\fatfix.h 32: };
..\..\include\fatfix.h 33: 
..\..\include\fatfix.h 34: 
..\..\include\fatfix.h 35: 
..\..\include\items.h 19: 
..\..\include\items.h 20: 
..\..\include\items.h 21: 
..\..\include\items.h 22: class CBootItem {
..\..\include\items.h 23: public:
..\..\include\items.h 24: char ItemName[48];
..\..\include\items.h 25: unsigned char PartIndex;
..\..\include\items.h 26: unsigned short Hotkey;
..\..\include\items.h 27: char Activate;
..\..\include\items.h 28: char FixDriveNum;
..\..\include\items.h 29: char Disabled;
..\..\include\items.h 30: unsigned long Password;
..\..\include\items.h 31: unsigned short Keys[16];
..\..\include\items.h 32: unsigned char HideList[56];
..\..\include\items.h 33: char SwapDrives;
..\..\include\items.h 34: char Reserved[11]; 
..\..\include\items.h 35: }; 
..\..\include\items.h 36: 
..\..\include\items.h 37: class CPartDesc {
..\..\include\items.h 38: public:
..\..\include\items.h 39: unsigned char Drive;
..\..\include\items.h 40: unsigned long StartSector;
..\..\include\items.h 41: }; 
..\..\include\items.h 42: 
..\..\include\items.h 43: 
..\..\include\items.h 44: class CBootItemFile {
..\..\include\items.h 45: public:
..\..\include\items.h 46: CBootItem BootItems[24];
..\..\include\items.h 47: CPartDesc PartList[56];
..\..\include\items.h 48: unsigned char BootItemCount;
..\..\include\items.h 49: unsigned char DefaultItem;
..\..\include\items.h 50: unsigned char Reserved0; 
..\..\include\items.h 51: unsigned char PartCount;
..\..\include\items.h 52: unsigned short Timeout;
..\..\include\items.h 53: unsigned char MbrHDSector0; 
..\..\include\items.h 54: char Reserved[17]; 
..\..\include\items.h 55: }; 
..\..\include\items.h 56: 
..\..\include\items.h 57: 
..\..\include\items.h 58: class CBootItems {
..\..\include\items.h 59: public:
..\..\include\items.h 60: CBootItems(CFileSystem &FileSystemToUse, CPartList &PartListToUse);
..\..\include\items.h 61: ~CBootItems();
..\..\include\items.h 62: int GetCount();
..\..\include\items.h 63: CBootItem *Get(int Index);
..\..\include\items.h 64: int Add(CBootItem &NewItem);
..\..\include\items.h 65: void Remove(int Index);
..\..\include\items.h 66: void Clear();
..\..\include\items.h 67: void Swap(int Index1, int Index2);
..\..\include\items.h 68: 
..\..\include\items.h 69: 
..\..\include\items.h 70: void Save();
..\..\include\items.h 71: void Reset();
..\..\include\items.h 72: 
..\..\include\items.h 73: void SetDefault(int Index);
..\..\include\items.h 74: int GetDefault();
..\..\include\items.h 75: int GetTimeout();
..\..\include\items.h 76: void SetTimeout(int Timeout);
..\..\include\items.h 77: 
..\..\include\items.h 78: int InitBoot(int BootIndex);
..\..\include\items.h 79: 
..\..\include\items.h 80: bool IsDefault(int Index);
..\..\include\items.h 81: bool CanFixFAT(int Index);
..\..\include\items.h 82: bool CanSwap(int Index);
..\..\include\items.h 83: 
..\..\include\items.h 84: private:
..\..\include\items.h 85: CDriveFix DriveFix;
..\..\include\items.h 86: CBootItemFile ItemFile;
..\..\include\items.h 87: 
..\..\include\items.h 88: CFileSystem &FileSystem;
..\..\include\items.h 89: CPartList &PartList;
..\..\include\items.h 90: 
..\..\include\items.h 91: void MoveUp(int Index);
..\..\include\items.h 92: void StoreKeys(const unsigned short *Keys);
..\..\include\items.h 93: 
..\..\include\items.h 94: void Initialize();
..\..\include\items.h 95: bool PartListIsChanged();
..\..\include\items.h 96: void AdjustPartList();
..\..\include\items.h 97: 
..\..\include\items.h 98: void BuildRelocTable(int *RelocTable);
..\..\include\items.h 99: void UpdatePartList(int *RelocTable);
..\..\include\items.h 100: 
..\..\include\items.h 101: void UpdatePartIndex(CBootItem &BootItem, int *RelocTable);
..\..\include\items.h 102: void UpdateHideList(unsigned char *HideList, int *RelocTable);
..\..\include\items.h 103: 
..\..\include\items.h 104: };
..\..\include\items.h 105: 
..\..\include\items.h 106: 
..\..\include\items.h 107: 
..\..\include\items.h 108: 
..\..\include\items.h 109: 
ptab.cpp 18: 
C:\BORLANDC\INCLUDE\mem.h 1: 
C:\BORLANDC\INCLUDE\mem.h 2: 
C:\BORLANDC\INCLUDE\mem.h 3: 
C:\BORLANDC\INCLUDE\mem.h 4: 
C:\BORLANDC\INCLUDE\mem.h 5: 
C:\BORLANDC\INCLUDE\mem.h 6: 
C:\BORLANDC\INCLUDE\mem.h 7: 
C:\BORLANDC\INCLUDE\mem.h 8: 
C:\BORLANDC\INCLUDE\mem.h 9: 
C:\BORLANDC\INCLUDE\mem.h 10: 
C:\BORLANDC\INCLUDE\mem.h 11: 
C:\BORLANDC\INCLUDE\mem.h 12: 
C:\BORLANDC\INCLUDE\mem.h 13: 
C:\BORLANDC\INCLUDE\_defs.h 1: 
C:\BORLANDC\INCLUDE\_defs.h 2: 
C:\BORLANDC\INCLUDE\_defs.h 3: 
C:\BORLANDC\INCLUDE\_defs.h 4: 
C:\BORLANDC\INCLUDE\_defs.h 5: 
C:\BORLANDC\INCLUDE\_defs.h 6: 
C:\BORLANDC\INCLUDE\_defs.h 7: 
C:\BORLANDC\INCLUDE\_defs.h 8: 
C:\BORLANDC\INCLUDE\_defs.h 9: 
C:\BORLANDC\INCLUDE\_defs.h 10: 
C:\BORLANDC\INCLUDE\_defs.h 11: 
C:\BORLANDC\INCLUDE\_defs.h 12: 
C:\BORLANDC\INCLUDE\_defs.h 13: 
C:\BORLANDC\INCLUDE\_defs.h 14: 
C:\BORLANDC\INCLUDE\_defs.h 15: 
C:\BORLANDC\INCLUDE\_defs.h 16: 
C:\BORLANDC\INCLUDE\_defs.h 17: 
C:\BORLANDC\INCLUDE\_defs.h 18: 
C:\BORLANDC\INCLUDE\_defs.h 19: 
C:\BORLANDC\INCLUDE\_defs.h 20: 
C:\BORLANDC\INCLUDE\_defs.h 21: 
C:\BORLANDC\INCLUDE\_defs.h 22: 
C:\BORLANDC\INCLUDE\_defs.h 23: 
C:\BORLANDC\INCLUDE\_defs.h 24: 
C:\BORLANDC\INCLUDE\_defs.h 25: 
C:\BORLANDC\INCLUDE\_defs.h 26: 
C:\BORLANDC\INCLUDE\_defs.h 27: 
C:\BORLANDC\INCLUDE\_defs.h 28: 
C:\BORLANDC\INCLUDE\_defs.h 29: 
C:\BORLANDC\INCLUDE\_defs.h 30: 
C:\BORLANDC\INCLUDE\_defs.h 31: 
C:\BORLANDC\INCLUDE\_defs.h 32: 
C:\BORLANDC\INCLUDE\_defs.h 33: 
C:\BORLANDC\INCLUDE\_defs.h 34: 
C:\BORLANDC\INCLUDE\_defs.h 35: 
C:\BORLANDC\INCLUDE\_defs.h 36: 
C:\BORLANDC\INCLUDE\_defs.h 37: 
C:\BORLANDC\INCLUDE\_defs.h 38: 
C:\BORLANDC\INCLUDE\_defs.h 39: 
C:\BORLANDC\INCLUDE\_defs.h 40: 
C:\BORLANDC\INCLUDE\_defs.h 41: 
C:\BORLANDC\INCLUDE\_defs.h 42: 
C:\BORLANDC\INCLUDE\_defs.h 43: 
C:\BORLANDC\INCLUDE\_defs.h 44: 
C:\BORLANDC\INCLUDE\_defs.h 45: 
C:\BORLANDC\INCLUDE\_defs.h 46: 
C:\BORLANDC\INCLUDE\_defs.h 47: 
C:\BORLANDC\INCLUDE\_defs.h 48: 
C:\BORLANDC\INCLUDE\_defs.h 49: 
C:\BORLANDC\INCLUDE\_defs.h 50: 
C:\BORLANDC\INCLUDE\_defs.h 51: 
C:\BORLANDC\INCLUDE\_defs.h 52: 
C:\BORLANDC\INCLUDE\_defs.h 53: 
C:\BORLANDC\INCLUDE\_defs.h 54: 
C:\BORLANDC\INCLUDE\_defs.h 55: 
C:\BORLANDC\INCLUDE\_defs.h 56: 
C:\BORLANDC\INCLUDE\_defs.h 57: 
C:\BORLANDC\INCLUDE\_defs.h 58: 
C:\BORLANDC\INCLUDE\_defs.h 59: 
C:\BORLANDC\INCLUDE\_defs.h 60: 
C:\BORLANDC\INCLUDE\_defs.h 61: 
C:\BORLANDC\INCLUDE\_defs.h 62: 
C:\BORLANDC\INCLUDE\_defs.h 63: 
C:\BORLANDC\INCLUDE\_defs.h 64: 
C:\BORLANDC\INCLUDE\_defs.h 65: 
C:\BORLANDC\INCLUDE\_defs.h 66: 
C:\BORLANDC\INCLUDE\_defs.h 67: 
C:\BORLANDC\INCLUDE\_defs.h 68: 
C:\BORLANDC\INCLUDE\_defs.h 69:   
C:\BORLANDC\INCLUDE\_defs.h 70: 
C:\BORLANDC\INCLUDE\_defs.h 71: 
C:\BORLANDC\INCLUDE\_defs.h 72: 
C:\BORLANDC\INCLUDE\_defs.h 73: 
C:\BORLANDC\INCLUDE\_defs.h 74:     
C:\BORLANDC\INCLUDE\_defs.h 75: 
C:\BORLANDC\INCLUDE\_defs.h 76:   
C:\BORLANDC\INCLUDE\_defs.h 77: 
C:\BORLANDC\INCLUDE\_defs.h 78: 
C:\BORLANDC\INCLUDE\_defs.h 79: 
C:\BORLANDC\INCLUDE\_defs.h 80: 
C:\BORLANDC\INCLUDE\_defs.h 81: 
C:\BORLANDC\INCLUDE\_defs.h 82: 
C:\BORLANDC\INCLUDE\_defs.h 83: 
C:\BORLANDC\INCLUDE\_defs.h 84: 
C:\BORLANDC\INCLUDE\_defs.h 85: 
C:\BORLANDC\INCLUDE\_defs.h 86: 
C:\BORLANDC\INCLUDE\_defs.h 87: 
C:\BORLANDC\INCLUDE\_defs.h 88: 
C:\BORLANDC\INCLUDE\_defs.h 89: 
C:\BORLANDC\INCLUDE\_defs.h 90: 
C:\BORLANDC\INCLUDE\_defs.h 91: 
C:\BORLANDC\INCLUDE\_defs.h 92: 
C:\BORLANDC\INCLUDE\_defs.h 93: 
C:\BORLANDC\INCLUDE\_defs.h 94: 
C:\BORLANDC\INCLUDE\_defs.h 95: 
C:\BORLANDC\INCLUDE\_defs.h 96: 
C:\BORLANDC\INCLUDE\_defs.h 97: 
C:\BORLANDC\INCLUDE\_defs.h 98: 
C:\BORLANDC\INCLUDE\_defs.h 99: 
C:\BORLANDC\INCLUDE\_defs.h 100: 
C:\BORLANDC\INCLUDE\_defs.h 101: 
C:\BORLANDC\INCLUDE\_defs.h 102: 
C:\BORLANDC\INCLUDE\_defs.h 103: 
C:\BORLANDC\INCLUDE\_defs.h 104: 
C:\BORLANDC\INCLUDE\_defs.h 105: 
C:\BORLANDC\INCLUDE\_defs.h 106: 
C:\BORLANDC\INCLUDE\mem.h 14: 
C:\BORLANDC\INCLUDE\mem.h 15: 
C:\BORLANDC\INCLUDE\mem.h 16: 
C:\BORLANDC\INCLUDE\mem.h 17: 
C:\BORLANDC\INCLUDE\mem.h 18: 
C:\BORLANDC\INCLUDE\mem.h 19: 
C:\BORLANDC\INCLUDE\mem.h 20: 
C:\BORLANDC\INCLUDE\mem.h 21: 
C:\BORLANDC\INCLUDE\mem.h 22: 
C:\BORLANDC\INCLUDE\mem.h 23: 
C:\BORLANDC\INCLUDE\mem.h 24:     
C:\BORLANDC\INCLUDE\mem.h 25: typedef long    ptrdiff_t;
C:\BORLANDC\INCLUDE\mem.h 26: 
C:\BORLANDC\INCLUDE\mem.h 27: 
C:\BORLANDC\INCLUDE\mem.h 28: 
C:\BORLANDC\INCLUDE\mem.h 29: 
C:\BORLANDC\INCLUDE\mem.h 30: 
C:\BORLANDC\INCLUDE\mem.h 31: 
C:\BORLANDC\INCLUDE\mem.h 32: 
C:\BORLANDC\INCLUDE\mem.h 33: 
C:\BORLANDC\INCLUDE\mem.h 34: 
C:\BORLANDC\INCLUDE\mem.h 35: 
C:\BORLANDC\INCLUDE\mem.h 36: 
C:\BORLANDC\INCLUDE\mem.h 37: extern "C" {
C:\BORLANDC\INCLUDE\mem.h 38: 
C:\BORLANDC\INCLUDE\mem.h 39: void  *  __cdecl memccpy(void  *__dest, const void  *__src,
C:\BORLANDC\INCLUDE\mem.h 40: int __c, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 41: void  *  __cdecl memchr(const void  *__s, int __c, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 42: int          __cdecl memcmp(const void  *__s1, const void  *__s2,
C:\BORLANDC\INCLUDE\mem.h 43: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 44: void  *  __cdecl memcpy(void  *__dest, const void  *__src,
C:\BORLANDC\INCLUDE\mem.h 45: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 46: int          __cdecl memicmp(const void  *__s1, const void  *__s2,
C:\BORLANDC\INCLUDE\mem.h 47: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 48: void  * __cdecl  memmove(void  *__dest, const void  *__src,
C:\BORLANDC\INCLUDE\mem.h 49: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 50: void  * __cdecl  memset(void  *__s, int __c, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 51: void         __cdecl movedata(unsigned __srcseg, unsigned __srcoff,
C:\BORLANDC\INCLUDE\mem.h 52: unsigned __dstseg,unsigned __dstoff, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 53: void         __cdecl movmem(const void  *__src, void  *__dest,
C:\BORLANDC\INCLUDE\mem.h 54: unsigned __length);
C:\BORLANDC\INCLUDE\mem.h 55: void         __cdecl setmem(void  *__dest,unsigned __length, char __value);
C:\BORLANDC\INCLUDE\mem.h 56: 
C:\BORLANDC\INCLUDE\mem.h 57: 
C:\BORLANDC\INCLUDE\mem.h 58: void  __far * __far __cdecl _fmemccpy(void __far *__dest, const void __far *__src,
C:\BORLANDC\INCLUDE\mem.h 59: int __c, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 60: void  __far * __far __cdecl _fmemchr(const void __far *__s, int __c, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 61: int         __far __cdecl _fmemcmp(const void __far *__s1, const void __far *__s2,
C:\BORLANDC\INCLUDE\mem.h 62: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 63: void  __far * __far __cdecl _fmemcpy(void __far *__dest, const void __far *__src,
C:\BORLANDC\INCLUDE\mem.h 64: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 65: int         __far __cdecl _fmemicmp(const void __far *__s1, const void __far *__s2,
C:\BORLANDC\INCLUDE\mem.h 66: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 67: void  __far * __far __cdecl _fmemmove(void __far *__dest, const void __far *__src,
C:\BORLANDC\INCLUDE\mem.h 68: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 69: void  __far * __far __cdecl _fmemset(void __far *__s, int __c, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 70: void        __far __cdecl _fmovmem(const void __far *__src, void __far *__dest,
C:\BORLANDC\INCLUDE\mem.h 71: unsigned __length);
C:\BORLANDC\INCLUDE\mem.h 72: void        __far __cdecl _fsetmem(void __far *__dest, unsigned __length,
C:\BORLANDC\INCLUDE\mem.h 73: char __value);
C:\BORLANDC\INCLUDE\mem.h 74: 
C:\BORLANDC\INCLUDE\mem.h 75: 
C:\BORLANDC\INCLUDE\mem.h 76: 
C:\BORLANDC\INCLUDE\mem.h 77: 
C:\BORLANDC\INCLUDE\mem.h 78: 
C:\BORLANDC\INCLUDE\mem.h 79: void  * __cdecl  __memchr__  (const void  *__s, int __c, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 80: int         __cdecl  __memcmp__(const void  *__s1,
C:\BORLANDC\INCLUDE\mem.h 81: const void  *__s2, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 82: void  * __cdecl  __memcpy__(void  *__dest, const void  *__src,
C:\BORLANDC\INCLUDE\mem.h 83: size_t __n);
C:\BORLANDC\INCLUDE\mem.h 84: void  * __cdecl  __memset__(void  *__s, int __c, size_t __n);
C:\BORLANDC\INCLUDE\mem.h 85: 
C:\BORLANDC\INCLUDE\mem.h 86: 
C:\BORLANDC\INCLUDE\mem.h 87: }
C:\BORLANDC\INCLUDE\mem.h 88: 
C:\BORLANDC\INCLUDE\mem.h 89: 
C:\BORLANDC\INCLUDE\mem.h 90: 
C:\BORLANDC\INCLUDE\mem.h 91: 
C:\BORLANDC\INCLUDE\mem.h 92: 
C:\BORLANDC\INCLUDE\mem.h 93: 
ptab.cpp 19: 
ptab.cpp 20: 
ptab.cpp 21: 
ptab.cpp 22: 
ptab.cpp 23: 
ptab.cpp 24: 
ptab.cpp 25: 
ptab.cpp 26: CPartList::CPartList()
ptab.cpp 27: {
ptab.cpp 28: AllowActiveHD = 0;
ptab.cpp 29: }
ptab.cpp 30: 
ptab.cpp 31: CPartList::~CPartList()
ptab.cpp 32: {
ptab.cpp 33: }
ptab.cpp 34: 
ptab.cpp 35: void CPartList::ReadStructure()
ptab.cpp 36: {
ptab.cpp 37: int DrvCount, Index;
ptab.cpp 38: TMBRNode *MBRList;
ptab.cpp 39: CDiskAccess DiskAccess;
ptab.cpp 40: 
ptab.cpp 41: MBRList = &this->MBRList;
ptab.cpp 42: DrvCount = DiskAccess.DriveCount(0x80);
ptab.cpp 43: for (Index = 0; Index < DrvCount; ++Index)
ptab.cpp 44: MBRList = AddDrive(Index | 0x80,0,0,0,MBRList);
ptab.cpp 45: MBRList->Next = 0L;
ptab.cpp 46: CreatePartList(DiskAccess.DriveCount(0x00));
ptab.cpp 47: 
ptab.cpp 48: CreatePLUP();
ptab.cpp 49: }
ptab.cpp 50: 
ptab.cpp 51: TMBRNode *CPartList::AddDrive(int Drive, unsigned long StartSector, unsigned long ExtStart, int Type, TMBRNode *MBRList)
ptab.cpp 52: {
ptab.cpp 53: CDisk Disk;
ptab.cpp 54: TPartTable *PartTable;
ptab.cpp 55: const TPartEntry *Entries;
ptab.cpp 56: int Index;
ptab.cpp 57: unsigned long NewStartSector;
ptab.cpp 58: 
ptab.cpp 59: if (Disk.Map(Drive,StartSector) == -1)
ptab.cpp 60: return MBRList;
ptab.cpp 61: PartTable = new TPartTable;
ptab.cpp 62: if (Disk.Read(0,PartTable,1) == -1 || PartTable->MagicNumber != 0xaa55) {
ptab.cpp 63: delete PartTable;
ptab.cpp 64: return MBRList;
ptab.cpp 65: }
ptab.cpp 66: MBRList = MBRList->Next = new TMBRNode;
ptab.cpp 67: MBRList->AbsoluteSector = StartSector;
ptab.cpp 68: MBRList->Drive = Drive;
ptab.cpp 69: MBRList->Type = Type;
ptab.cpp 70: MBRList->Table = PartTable;
ptab.cpp 71: Entries = MBRList->Table->Entries;
ptab.cpp 72: for (Index = 0; Index < 4; ++Index)
ptab.cpp 73: switch (Entries[Index].FSType) {
ptab.cpp 74: case 0x05:
ptab.cpp 75: case 0x0f:
ptab.cpp 76: case 0x85:
ptab.cpp 77: case 0x1f:
ptab.cpp 78: if (Type != 1) {
ptab.cpp 79: ExtStart = Entries[Index].RelativeSector;
ptab.cpp 80: NewStartSector = ExtStart;
ptab.cpp 81: }
ptab.cpp 82: else
ptab.cpp 83: NewStartSector = ExtStart + Entries[Index].RelativeSector;
ptab.cpp 84: MBRList = AddDrive(Drive,NewStartSector,ExtStart,1,MBRList);
ptab.cpp 85: break;
ptab.cpp 86: default:
ptab.cpp 87: break;
ptab.cpp 88: }
ptab.cpp 89: return MBRList;
ptab.cpp 90: }
ptab.cpp 91: 
ptab.cpp 92: 
ptab.cpp 93: 
ptab.cpp 94: void CPartList::CreatePartList(int FloppyCount)
ptab.cpp 95: {
ptab.cpp 96: TPartNode *PartList;
ptab.cpp 97: TMBRNode *MBRNode;
ptab.cpp 98: int Index, Drive;
ptab.cpp 99: const TPartEntry *Entries;
ptab.cpp 100: 
ptab.cpp 101: Count = 0;
ptab.cpp 102: PartList = &this->PartList;
ptab.cpp 103: if (MBRList.Next)
ptab.cpp 104: Drive = MBRList.Next->Drive;
ptab.cpp 105: for (MBRNode = MBRList.Next; MBRNode; MBRNode = MBRNode->Next) {
ptab.cpp 106: if (Drive != MBRNode->Drive) {
ptab.cpp 107: Drive = MBRNode->Drive;
ptab.cpp 108: PartList = PartList->Next = CreateNonPartNode(Drive);
ptab.cpp 109: ++Count;
ptab.cpp 110: }
ptab.cpp 111: for (Index = 0; Index < 4; ++Index) {
ptab.cpp 112: Entries = &MBRNode->Table->Entries[Index];
ptab.cpp 113: if (Entries->RelativeSector && ((Entries->FSType != 0x05 &&
ptab.cpp 114: Entries->FSType != 0x0f && Entries->FSType != 0x85) ||
ptab.cpp 115: MBRNode->Type != 1)) {
ptab.cpp 116: 
ptab.cpp 117: PartList = PartList->Next = CreatePartNode(MBRNode,Index);
ptab.cpp 118: ++Count;
ptab.cpp 119: }
ptab.cpp 120: }
ptab.cpp 121: }
ptab.cpp 122: for (Index = 0; Index < FloppyCount; ++Index)
ptab.cpp 123: PartList = PartList->Next = CreateNonPartNode(Index);
ptab.cpp 124: Count += FloppyCount;
ptab.cpp 125: PartList->Next = 0L;
ptab.cpp 126: }
ptab.cpp 127: 
ptab.cpp 128: 
ptab.cpp 129: TPartNode *CPartList::CreateNonPartNode(int Drive)
ptab.cpp 130: {
ptab.cpp 131: TPartNode *PartNode;
ptab.cpp 132: TPartition *Partition;
ptab.cpp 133: 
ptab.cpp 134: PartNode = new TPartNode;
ptab.cpp 135: Partition = PartNode->Partition = new TPartition;
ptab.cpp 136: PartNode->Entry = 0L;
ptab.cpp 137: 
ptab.cpp 138: Partition->Drive = Drive;
ptab.cpp 139: Partition->StartSector = 0;
ptab.cpp 140: Partition->SectorCount = 0;
ptab.cpp 141: if (Drive >= 0x80) {
ptab.cpp 142: Partition->FSName = "Master Boot Record";
ptab.cpp 143: Partition->FSType = -1;
ptab.cpp 144: Partition->Type = 2;
ptab.cpp 145: }
ptab.cpp 146: else {
ptab.cpp 147: Partition->FSName = "Boot floppy";
ptab.cpp 148: Partition->FSType = -1;
ptab.cpp 149: Partition->Type = 3;
ptab.cpp 150: }
ptab.cpp 151: return PartNode;
ptab.cpp 152: }
ptab.cpp 153: 
ptab.cpp 154: TPartNode *CPartList::CreatePartNode(const TMBRNode *MBRNode, int Index)
ptab.cpp 155: {
ptab.cpp 156: TPartNode *PartNode;
ptab.cpp 157: TPartition *Partition;
ptab.cpp 158: const TPartEntry *PartEntry;
ptab.cpp 159: 
ptab.cpp 160: PartNode = new TPartNode;
ptab.cpp 161: Partition = PartNode->Partition = new TPartition;
ptab.cpp 162: PartEntry = PartNode->Entry = &MBRNode->Table->Entries[Index];
ptab.cpp 163: 
ptab.cpp 164: Partition->Drive = MBRNode->Drive;
ptab.cpp 165: Partition->StartSector = MBRNode->AbsoluteSector + PartEntry->RelativeSector;
ptab.cpp 166: Partition->SectorCount = PartEntry->SectorCount;
ptab.cpp 167: Partition->FSName = GetFSName(PartEntry->FSType);
ptab.cpp 168: Partition->FSType = PartEntry->FSType;
ptab.cpp 169: Partition->Type = MBRNode->Type;
ptab.cpp 170: Partition->MbrHDSector0 = GetPartMbrHDSector0(Partition);
ptab.cpp 171: return PartNode;
ptab.cpp 172: }
ptab.cpp 173: 
ptab.cpp 174: 
ptab.cpp 175: 
ptab.cpp 176: const char *CPartList::GetFSName(int FSID)
ptab.cpp 177: {
ptab.cpp 178: int Index;
ptab.cpp 179: 
ptab.cpp 180: for (Index = 0; FSNameList[Index].FSID != FSID && FSNameList[Index].FSID != 0xff; ++Index);
ptab.cpp 181: return FSNameList[Index].FSName;
ptab.cpp 182: }
ptab.cpp 183: 
ptab.cpp 184: void CPartList::CreatePLUP()
ptab.cpp 185: {
ptab.cpp 186: int Index;
ptab.cpp 187: TPartNode *PartList;
ptab.cpp 188: 
ptab.cpp 189: PartList = this->PartList.Next;
ptab.cpp 190: PLUP = new TPartNode *[Count];
ptab.cpp 191: for (Index = 0; Index < Count; ++Index, PartList = PartList->Next)
ptab.cpp 192: PLUP[Index] = PartList;
ptab.cpp 193: }
ptab.cpp 194: 
ptab.cpp 195: void CPartList::WriteStructure()
ptab.cpp 196: {
ptab.cpp 197: CDisk Disk;
ptab.cpp 198: TMBRNode *MBRList;
ptab.cpp 199: 
ptab.cpp 200: for (MBRList = this->MBRList.Next; MBRList; MBRList = MBRList->Next) {
ptab.cpp 201: Disk.Map(MBRList->Drive,MBRList->AbsoluteSector);
ptab.cpp 202: Disk.Write(0,MBRList->Table,1);
ptab.cpp 203: }
ptab.cpp 204: }
ptab.cpp 205: 
ptab.cpp 206: const TPartition *CPartList::GetPartition(int Index)
ptab.cpp 207: {
ptab.cpp 208: return PLUP[Index]->Partition;
ptab.cpp 209: }
ptab.cpp 210: 
ptab.cpp 211: int CPartList::Locate(int Drive, unsigned long StartSector)
ptab.cpp 212: {
ptab.cpp 213: int Index;
ptab.cpp 214: const TPartition *Partition;
ptab.cpp 215: 
ptab.cpp 216: for (Index = 0; Index < Count; ++Index) {
ptab.cpp 217: Partition = PLUP[Index]->Partition;
ptab.cpp 218: if (Partition->Drive == Drive && Partition->StartSector == StartSector)
ptab.cpp 219: return Index;
ptab.cpp 220: }
ptab.cpp 221: return -1;
ptab.cpp 222: }
ptab.cpp 223: 
ptab.cpp 224: int CPartList::GetCount()
ptab.cpp 225: {
ptab.cpp 226: return Count;
ptab.cpp 227: }
ptab.cpp 228: 
ptab.cpp 229: int CPartList::CanHide(int Index)
ptab.cpp 230: {
ptab.cpp 231: switch (PLUP[Index]->Entry->FSType & 0xef) {
ptab.cpp 232: case 0x01:
ptab.cpp 233: case 0x04:
ptab.cpp 234: case 0x06:
ptab.cpp 235: case 0x07:
ptab.cpp 236: case 0x0b:
ptab.cpp 237: case 0x0c:
ptab.cpp 238: case 0x0e:
ptab.cpp 239: case 0x0f:
ptab.cpp 240: return 1;
ptab.cpp 241: default:
ptab.cpp 242: return 0;
ptab.cpp 243: }
ptab.cpp 244: }
ptab.cpp 245: 
ptab.cpp 246: void CPartList::Hide(int Index)
ptab.cpp 247: {
ptab.cpp 248: if (CanHide(Index))
ptab.cpp 249: PLUP[Index]->Entry->FSType |= 0x10;
ptab.cpp 250: }
ptab.cpp 251: 
ptab.cpp 252: void CPartList::Reveal(int Index)
ptab.cpp 253: {
ptab.cpp 254: if (CanHide(Index))
ptab.cpp 255: PLUP[Index]->Entry->FSType &= 0xef;
ptab.cpp 256: }
ptab.cpp 257: 
ptab.cpp 258: int CPartList::CanActivate(int Index)
ptab.cpp 259: {
ptab.cpp 260: int Type;
ptab.cpp 261: 
ptab.cpp 262: Type = PLUP[Index]->Partition->Type;
ptab.cpp 263: return Type != 2 && Type != 3;
ptab.cpp 264: }
ptab.cpp 265: 
ptab.cpp 266: void CPartList::SetAllowActiveHD(int Status)
ptab.cpp 267: {
ptab.cpp 268: AllowActiveHD = Status;
ptab.cpp 269: }
ptab.cpp 270: 
ptab.cpp 271: void CPartList::ClearActive(int Drive)
ptab.cpp 272: {
ptab.cpp 273: int Index;
ptab.cpp 274: 
ptab.cpp 275: if (!AllowActiveHD)
ptab.cpp 276: 
ptab.cpp 277: for (Index = 0; Index < Count; ++Index)
ptab.cpp 278: PLUP[Index]->Entry->Activated = 0x00;
ptab.cpp 279: else
ptab.cpp 280: 
ptab.cpp 281: for (Index = 0; Index < Count; ++Index)
ptab.cpp 282: if (PLUP[Index]->Partition->Drive == Drive)
ptab.cpp 283: PLUP[Index]->Entry->Activated = 0x00;
ptab.cpp 284: }
ptab.cpp 285: 
ptab.cpp 286: void CPartList::SetActive(int Index)
ptab.cpp 287: {
ptab.cpp 288: ClearActive(PLUP[Index]->Partition->Drive);
ptab.cpp 289: PLUP[Index]->Entry->Activated = 0x80;
ptab.cpp 290: }
ptab.cpp 291: 
ptab.cpp 292: void CPartList::SetFsType(int Index, int FsType)
ptab.cpp 293: {
ptab.cpp 294: PLUP[Index]->Entry->FSType = FsType;
ptab.cpp 295: }
ptab.cpp 296: 
ptab.cpp 297: 
ptab.cpp 298: CPartList::TFSNameEntry CPartList::FSNameList[] = {
ptab.cpp 299: {0x01,"Microsoft FAT12"},
ptab.cpp 300: {0x04,"Microsoft FAT16"},
ptab.cpp 301: {0x05,"Extended"},
ptab.cpp 302: {0x06,"Microsoft FAT16"},
ptab.cpp 303: {0x07,"HPFS or NTFS"},
ptab.cpp 304: {0x0a,"OS/2 Boot Manager"},
ptab.cpp 305: {0x0b,"Microsoft FAT32"},
ptab.cpp 306: {0x0c,"Microsoft FAT32 LBA"},
ptab.cpp 307: {0x0e,"Microsoft FAT16 LBA"},
ptab.cpp 308: {0x0f,"Extended LBA"},
ptab.cpp 309: {0x11,"Hidden FAT12"},
ptab.cpp 310: {0x14,"Hidden FAT16"},
ptab.cpp 311: {0x16,"Hidden FAT16"},
ptab.cpp 312: {0x17,"Hidden NTFS"},
ptab.cpp 313: {0x1b,"Hidden FAT32"},
ptab.cpp 314: {0x1c,"Hidden FAT32 LBA"},
ptab.cpp 315: {0x1e,"Hidden FAT16 LBA"},
ptab.cpp 316: {0x1f,"Hidden Extended LBA"},
ptab.cpp 317: {0x63,"Unix SysV/386"},
ptab.cpp 318: {0x78,"XOSL FS"},
ptab.cpp 319: {0x82,"Linux Swap"},
ptab.cpp 320: {0x83,"Linux Native"},
ptab.cpp 321: {0x85,"Linux Extended"},
ptab.cpp 322: {0xa5,"FreeBSD, BSD/386"},
ptab.cpp 323: {0xeb,"BeOS"},
ptab.cpp 324: {0xff,"Unknown"}
ptab.cpp 325: };
ptab.cpp 326: 
ptab.cpp 327: 
ptab.cpp 328: 
ptab.cpp 329: 
ptab.cpp 330: 
ptab.cpp 331: 
ptab.cpp 332: 
ptab.cpp 333: 
ptab.cpp 334: 
ptab.cpp 335: 
ptab.cpp 336: 
ptab.cpp 337: 
ptab.cpp 338: 
ptab.cpp 339: 
ptab.cpp 340: 
ptab.cpp 341: 
ptab.cpp 342: 
ptab.cpp 343: 
ptab.cpp 344: 
ptab.cpp 345: 
ptab.cpp 346: 
ptab.cpp 347: 
ptab.cpp 348: 
ptab.cpp 349: 
ptab.cpp 350: 
ptab.cpp 351: 
ptab.cpp 352: 
ptab.cpp 353: int __far memcmp(const void *s1, const void *s2, unsigned short count);
ptab.cpp 354: 
ptab.cpp 355: 
ptab.cpp 356: unsigned char CPartList::GetPartMbrHDSector0(TPartition *Partition)
ptab.cpp 357: {
ptab.cpp 358: CDisk Disk;
ptab.cpp 359: CFAT16 *FileSystem = new CFAT16;
ptab.cpp 360: TBootRecord BootRecord;
ptab.cpp 361: unsigned char Res = -1;
ptab.cpp 362: CBootItemFile *BootItemData = new CBootItemFile;
ptab.cpp 363: 
ptab.cpp 364: 
ptab.cpp 365: if(Disk.Map(Partition->Drive, Partition->StartSector) != -1)
ptab.cpp 366: if(Disk.Read(0, &BootRecord,1) != -1 )
ptab.cpp 367: if(memcmp(BootRecord.BootFAT16.OEM_ID,"XOSLINST",8) == 0 )
ptab.cpp 368: if(FileSystem->Mount(Partition->Drive,Partition->StartSector) != -1 )
ptab.cpp 369: if (FileSystem->ReadFile("BOOTITEMXDF",BootItemData) == 4096 )
ptab.cpp 370: Res = BootItemData->MbrHDSector0;
ptab.cpp 371: delete FileSystem;
ptab.cpp 372: delete BootItemData;
ptab.cpp 373: return Res;
ptab.cpp 374: }
ptab.cpp 375: 
ptab.cpp 376: 